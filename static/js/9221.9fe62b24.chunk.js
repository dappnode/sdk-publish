"use strict";(self.webpackChunkpublish=self.webpackChunkpublish||[]).push([[9221],{79221:(e,t,n)=>{n.r(t),n.d(t,{W3mEmailLoginView:()=>M,W3mEmailOtpWidget:()=>h.H,W3mEmailVerifyDeviceView:()=>x,W3mEmailVerifyOtpView:()=>m,W3mUpdateEmailPrimaryOtpView:()=>_,W3mUpdateEmailSecondaryOtpView:()=>L,W3mUpdateEmailWalletView:()=>P});var i=n(17321),r=n(23743),o=n(42661),a=n(79323),l=n(61139),s=n(73609),c=n(7258),u=n(24657),d=n(89268),h=n(41722),p=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let m=class extends h.H{constructor(){super(...arguments),this.onOtpSubmit=async e=>{try{if(this.authConnector){var t,n;const u=i.W.state.activeChain,d=r.x.getConnections(u),h=null===(t=o.H.state.remoteFeatures)||void 0===t?void 0:t.multiWallet,p=d.length>0;if(await this.authConnector.provider.connectOtp({otp:e}),a.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),!u)throw new Error("Active chain is not set on ChainControll");if(await r.x.connectExternal(this.authConnector,u),a.E.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"email",name:this.authConnector.name||"Unknown",view:l.I.state.view,walletRank:void 0}}),null!==(n=o.H.state.remoteFeatures)&&void 0!==n&&n.emailCapture)return;if(o.H.state.siwx)return void s.W.close();if(p&&h)return l.I.replace("ProfileWallets"),void c.P.showSuccess("New Wallet Added");s.W.close()}}catch(d){throw a.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:u.w.parseError(d)}}),d}},this.onOtpResend=async e=>{this.authConnector&&(await this.authConnector.provider.connectEmail({email:e}),a.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_SENT"}))}}};m=p([(0,d.EM)("w3m-email-verify-otp-view")],m);var w,f=n(57528),v=n(37022),g=n(56370),y=n(25015);n(84107),n(60677),n(43901),n(84875);const E=(0,d.AH)(w||(w=(0,f.A)(["\n  wui-icon-box {\n    height: ",";\n    width: ",";\n  }\n"])),(e=>{let{spacing:t}=e;return t[16]}),(e=>{let{spacing:t}=e;return t[16]}));var b,I=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let x=class extends v.WF{constructor(){var e;super(),this.email=null===(e=l.I.state.data)||void 0===e?void 0:e.email,this.authConnector=y.a.getAuthConnector(),this.loading=!1,this.listenForDeviceApproval()}render(){if(!this.email)throw new Error("w3m-email-verify-device-view: No email provided");if(!this.authConnector)throw new Error("w3m-email-verify-device-view: No auth connector provided");return(0,v.qy)(b||(b=(0,f.A)(['\n      <wui-flex\n        flexDirection="column"\n        alignItems="center"\n        .padding=','\n        gap="4"\n      >\n        <wui-icon-box size="xl" color="accent-primary" icon="sealCheck"></wui-icon-box>\n\n        <wui-flex flexDirection="column" alignItems="center" gap="3">\n          <wui-flex flexDirection="column" alignItems="center">\n            <wui-text variant="md-regular" color="primary">\n              Approve the login link we sent to\n            </wui-text>\n            <wui-text variant="md-regular" color="primary"><b>','</b></wui-text>\n          </wui-flex>\n\n          <wui-text variant="sm-regular" color="secondary" align="center">\n            The code expires in 20 minutes\n          </wui-text>\n\n          <wui-flex alignItems="center" id="w3m-resend-section" gap="2">\n            <wui-text variant="sm-regular" color="primary" align="center">\n              Didn\'t receive it?\n            </wui-text>\n            <wui-link @click='," .disabled=",">\n              Resend email\n            </wui-link>\n          </wui-flex>\n        </wui-flex>\n      </wui-flex>\n    "])),["6","3","6","3"],this.email,this.onResendCode.bind(this),this.loading)}async listenForDeviceApproval(){if(this.authConnector)try{await this.authConnector.provider.connectDevice(),a.E.sendEvent({type:"track",event:"DEVICE_REGISTERED_FOR_EMAIL"}),a.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_SENT"}),l.I.replace("EmailVerifyOtp",{email:this.email})}catch(e){l.I.goBack()}}async onResendCode(){try{if(!this.loading){if(!this.authConnector||!this.email)throw new Error("w3m-email-login-widget: Unable to resend email");this.loading=!0,await this.authConnector.provider.connectEmail({email:this.email}),this.listenForDeviceApproval(),c.P.showSuccess("Code email resent")}}catch(e){c.P.showError(e)}finally{this.loading=!1}}};x.styles=E,I([(0,g.wk)()],x.prototype,"loading",void 0),x=I([(0,d.EM)("w3m-email-verify-device-view")],x);var O,C=n(94657);n(92016),n(47438);const A=(0,v.AH)(O||(O=(0,f.A)(["\n  wui-email-input {\n    width: 100%;\n  }\n\n  form {\n    width: 100%;\n    display: block;\n    position: relative;\n  }\n"])));var k,R,T,S=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let P=class extends v.WF{constructor(){var e,t,n;super(...arguments),this.formRef=(0,C._)(),this.initialEmail=null!==(e=null===(t=l.I.state.data)||void 0===t?void 0:t.email)&&void 0!==e?e:"",this.redirectView=null===(n=l.I.state.data)||void 0===n?void 0:n.redirectView,this.email="",this.loading=!1}firstUpdated(){var e;null===(e=this.formRef.value)||void 0===e||e.addEventListener("keydown",(e=>{"Enter"===e.key&&this.onSubmitEmail(e)}))}render(){return(0,v.qy)(k||(k=(0,f.A)(['\n      <wui-flex flexDirection="column" padding="4" gap="4">\n        <form '," @submit=",">\n          <wui-email-input\n            value=","\n            .disabled=","\n            @inputChange=",'\n          >\n          </wui-email-input>\n          <input type="submit" hidden />\n        </form>\n        ',"\n      </wui-flex>\n    "])),(0,C.K)(this.formRef),this.onSubmitEmail.bind(this),this.initialEmail,this.loading,this.onEmailInputChange.bind(this),this.buttonsTemplate())}onEmailInputChange(e){this.email=e.detail}async onSubmitEmail(e){try{if(this.loading)return;this.loading=!0,e.preventDefault();const t=y.a.getAuthConnector();if(!t)throw new Error("w3m-update-email-wallet: Auth connector not found");const n=await t.provider.updateEmail({email:this.email});a.E.sendEvent({type:"track",event:"EMAIL_EDIT"}),"VERIFY_SECONDARY_OTP"===n.action?l.I.push("UpdateEmailSecondaryOtp",{email:this.initialEmail,newEmail:this.email,redirectView:this.redirectView}):l.I.push("UpdateEmailPrimaryOtp",{email:this.initialEmail,newEmail:this.email,redirectView:this.redirectView})}catch(t){c.P.showError(t),this.loading=!1}}buttonsTemplate(){const e=!this.loading&&this.email.length>3&&this.email!==this.initialEmail;return this.redirectView?(0,v.qy)(T||(T=(0,f.A)(['\n      <wui-flex gap="3">\n        <wui-button size="md" variant="neutral" fullWidth @click=','>\n          Cancel\n        </wui-button>\n\n        <wui-button\n          size="md"\n          variant="accent-primary"\n          fullWidth\n          @click=',"\n          .disabled=","\n          .loading=","\n        >\n          Save\n        </wui-button>\n      </wui-flex>\n    "])),l.I.goBack,this.onSubmitEmail.bind(this),!e,this.loading):(0,v.qy)(R||(R=(0,f.A)(['\n        <wui-button\n          size="md"\n          variant="accent-primary"\n          fullWidth\n          @click=',"\n          .disabled=","\n          .loading=","\n        >\n          Save\n        </wui-button>\n      "])),this.onSubmitEmail.bind(this),!e,this.loading)}};P.styles=A,S([(0,g.wk)()],P.prototype,"email",void 0),S([(0,g.wk)()],P.prototype,"loading",void 0),P=S([(0,d.EM)("w3m-update-email-wallet-view")],P);var D=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let _=class extends h.H{constructor(){var e;super(),this.email=null===(e=l.I.state.data)||void 0===e?void 0:e.email,this.onOtpSubmit=async e=>{try{this.authConnector&&(await this.authConnector.provider.updateEmailPrimaryOtp({otp:e}),a.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),l.I.replace("UpdateEmailSecondaryOtp",l.I.state.data))}catch(t){throw a.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:u.w.parseError(t)}}),t}},this.onStartOver=()=>{l.I.replace("UpdateEmailWallet",l.I.state.data)}}};_=D([(0,d.EM)("w3m-update-email-primary-otp-view")],_);var F=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let L=class extends h.H{constructor(){var e,t;super(),this.email=null===(e=l.I.state.data)||void 0===e?void 0:e.newEmail,this.redirectView=null===(t=l.I.state.data)||void 0===t?void 0:t.redirectView,this.onOtpSubmit=async e=>{try{this.authConnector&&(await this.authConnector.provider.updateEmailSecondaryOtp({otp:e}),a.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),this.redirectView&&l.I.reset(this.redirectView))}catch(t){throw a.E.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:u.w.parseError(t)}}),t}},this.onStartOver=()=>{l.I.replace("UpdateEmailWallet",l.I.state.data)}}};L=F([(0,d.EM)("w3m-update-email-secondary-otp-view")],L);var N,V=n(80883),j=n(32819),W=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let M=class extends v.WF{constructor(){var e;super(),this.authConnector=y.a.getAuthConnector(),this.isEmailEnabled=null===(e=o.H.state.remoteFeatures)||void 0===e?void 0:e.email,this.isAuthEnabled=this.checkIfAuthEnabled(y.a.state.connectors),this.connectors=y.a.state.connectors,y.a.subscribeKey("connectors",(e=>{this.connectors=e,this.isAuthEnabled=this.checkIfAuthEnabled(this.connectors)}))}render(){if(!this.isEmailEnabled)throw new Error("w3m-email-login-view: Email is not enabled");if(!this.isAuthEnabled)throw new Error("w3m-email-login-view: No auth connector provided");return(0,v.qy)(N||(N=(0,f.A)(['<wui-flex flexDirection="column" .padding=',' gap="4">\n      <w3m-email-login-widget></w3m-email-login-widget>\n    </wui-flex> '])),["1","3","3","3"])}checkIfAuthEnabled(e){const t=e.filter((e=>e.type===j.o.CONNECTOR_TYPE_AUTH)).map((e=>e.chain));return V.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.some((e=>t.includes(e)))}};W([(0,g.wk)()],M.prototype,"connectors",void 0),M=W([(0,d.EM)("w3m-email-login-view")],M)},41722:(e,t,n)=>{n.d(t,{H:()=>F});var i,r=n(57528),o=n(37022),a=n(56370),l=n(61139),s=n(25015),c=n(24657),u=n(7258),d=n(89268),h=(n(84107),n(43901),n(94582),n(52574),n(39446)),p=n(69929),m=n(37845);const w=(0,n(89406).AH)(i||(i=(0,r.A)(["\n  :host {\n    position: relative;\n    display: inline-block;\n  }\n\n  input {\n    width: 48px;\n    height: 48px;\n    background: ",";\n    border-radius: ",";\n    border: 1px solid ",";\n    font-family: ",";\n    font-size: ",";\n    line-height: 18px;\n    letter-spacing: -0.16px;\n    text-align: center;\n    color: ",";\n    caret-color: ",";\n    transition:\n      background-color ","\n        ",",\n      border-color ","\n        ",",\n      box-shadow ","\n        ",";\n    will-change: background-color, border-color, box-shadow;\n    box-sizing: border-box;\n    -webkit-appearance: none;\n    -moz-appearance: textfield;\n    padding: ",";\n  }\n\n  input::-webkit-outer-spin-button,\n  input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  input:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n\n  input:focus-visible:enabled {\n    background-color: transparent;\n    border: 1px solid ",";\n    box-shadow: 0px 0px 0px 4px ",";\n  }\n"])),(e=>{let{tokens:t}=e;return t.theme.foregroundPrimary}),(e=>{let{borderRadius:t}=e;return t[4]}),(e=>{let{tokens:t}=e;return t.theme.borderPrimary}),(e=>{let{fontFamily:t}=e;return t.regular}),(e=>{let{textSize:t}=e;return t.large}),(e=>{let{tokens:t}=e;return t.theme.textPrimary}),(e=>{let{tokens:t}=e;return t.core.textAccentPrimary}),(e=>{let{durations:t}=e;return t.lg}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}),(e=>{let{durations:t}=e;return t.lg}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}),(e=>{let{durations:t}=e;return t.lg}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}),(e=>{let{spacing:t}=e;return t[4]}),(e=>{let{tokens:t}=e;return t.theme.borderSecondary}),(e=>{let{tokens:t}=e;return t.core.foregroundAccent040}));var f,v=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let g=class extends o.WF{constructor(){super(...arguments),this.disabled=!1,this.value=""}render(){return(0,o.qy)(f||(f=(0,r.A)(['<input\n      type="number"\n      maxlength="1"\n      inputmode="numeric"\n      autofocus\n      ?disabled=',"\n      value=","\n    /> "])),this.disabled,this.value)}};var y;g.styles=[h.W5,h.fD,w],v([(0,a.MZ)({type:Boolean})],g.prototype,"disabled",void 0),v([(0,a.MZ)({type:String})],g.prototype,"value",void 0),g=v([(0,m.E)("wui-input-numeric")],g);const E=(0,o.AH)(y||(y=(0,r.A)(["\n  :host {\n    position: relative;\n    display: block;\n  }\n"])));var b,I,x=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let O=class extends o.WF{constructor(){super(...arguments),this.length=6,this.otp="",this.values=Array.from({length:this.length}).map((()=>"")),this.numerics=[],this.shouldInputBeEnabled=e=>this.values.slice(0,e).every((e=>""!==e)),this.handleKeyDown=(e,t)=>{const n=e.target,i=this.getInputElement(n);if(!i)return;["ArrowLeft","ArrowRight","Shift","Delete"].includes(e.key)&&e.preventDefault();const r=i.selectionStart;switch(e.key){case"ArrowLeft":r&&i.setSelectionRange(r+1,r+1),this.focusInputField("prev",t);break;case"ArrowRight":case"Shift":this.focusInputField("next",t);break;case"Delete":case"Backspace":""===i.value?this.focusInputField("prev",t):this.updateInput(i,t,"")}},this.focusInputField=(e,t)=>{if("next"===e){const e=t+1;if(!this.shouldInputBeEnabled(e))return;const n=this.numerics[e<this.length?e:t],i=n?this.getInputElement(n):void 0;i&&(i.disabled=!1,i.focus())}if("prev"===e){const e=t-1,n=this.numerics[e>-1?e:t],i=n?this.getInputElement(n):void 0;i&&i.focus()}}}firstUpdated(){var e,t;this.otp&&(this.values=this.otp.split(""));const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelectorAll("wui-input-numeric");n&&(this.numerics=Array.from(n)),null===(t=this.numerics[0])||void 0===t||t.focus()}render(){return(0,o.qy)(b||(b=(0,r.A)(['\n      <wui-flex gap="1" data-testid="wui-otp-input">\n        ',"\n      </wui-flex>\n    "])),Array.from({length:this.length}).map(((e,t)=>(0,o.qy)(I||(I=(0,r.A)(["\n            <wui-input-numeric\n              @input=","\n              @click=","\n              @keydown=","\n              .disabled=","\n              .value=","\n            >\n            </wui-input-numeric>\n          "])),(e=>this.handleInput(e,t)),(e=>this.selectInput(e)),(e=>this.handleKeyDown(e,t)),!this.shouldInputBeEnabled(t),this.values[t]||""))))}updateInput(e,t,n){const i=this.numerics[t],r=e||(i?this.getInputElement(i):void 0);r&&(r.value=n,this.values=this.values.map(((e,i)=>i===t?n:e)))}selectInput(e){const t=e.target;if(t){const e=this.getInputElement(t);null===e||void 0===e||e.select()}}handleInput(e,t){const n=e.target,i=this.getInputElement(n);if(i){const n=i.value;if("insertFromPaste"===e.inputType)this.handlePaste(i,n,t);else{p.Z.isNumber(n)&&e.data?(this.updateInput(i,t,e.data),this.focusInputField("next",t)):this.updateInput(i,t,"")}}this.dispatchInputChangeEvent()}handlePaste(e,t,n){const i=t[0];if(i&&p.Z.isNumber(i)){this.updateInput(e,n,i);const r=t.substring(1);if(n+1<this.length&&r.length){const e=this.numerics[n+1],t=e?this.getInputElement(e):void 0;t&&this.handlePaste(t,r,n+1)}else this.focusInputField("next",n)}else this.updateInput(e,n,"")}getInputElement(e){var t;return null!==(t=e.shadowRoot)&&void 0!==t&&t.querySelector("input")?e.shadowRoot.querySelector("input"):null}dispatchInputChangeEvent(){const e=this.values.join("");this.dispatchEvent(new CustomEvent("inputChange",{detail:e,bubbles:!0,composed:!0}))}};O.styles=[h.W5,E],x([(0,a.MZ)({type:Number})],O.prototype,"length",void 0),x([(0,a.MZ)({type:String})],O.prototype,"otp",void 0),x([(0,a.wk)()],O.prototype,"values",void 0),O=x([(0,m.E)("wui-otp")],O);n(84875);var C,A=n(22538);const k=(0,o.AH)(C||(C=(0,r.A)(["\n  wui-loading-spinner {\n    margin: 9px auto;\n  }\n\n  .email-display,\n  .email-display wui-text {\n    max-width: 100%;\n  }\n"])));var R,T,S,P,D,_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let F=D=class extends o.WF{firstUpdated(){this.startOTPTimeout()}disconnectedCallback(){clearTimeout(this.OTPTimeout)}constructor(){var e;super(),this.loading=!1,this.timeoutTimeLeft=A.Q.getTimeToNextEmailLogin(),this.error="",this.otp="",this.email=null===(e=l.I.state.data)||void 0===e?void 0:e.email,this.authConnector=s.a.getAuthConnector()}render(){if(!this.email)throw new Error("w3m-email-otp-widget: No email provided");const e=Boolean(this.timeoutTimeLeft),t=this.getFooterLabels(e);return(0,o.qy)(R||(R=(0,r.A)(['\n      <wui-flex\n        flexDirection="column"\n        alignItems="center"\n        .padding=','\n        gap="4"\n      >\n        <wui-flex\n          class="email-display"\n          flexDirection="column"\n          alignItems="center"\n          .padding=','\n        >\n          <wui-text variant="md-regular" color="primary" align="center">\n            Enter the code we sent to\n          </wui-text>\n          <wui-text variant="md-medium" color="primary" lineClamp="1" align="center">\n            ','\n          </wui-text>\n        </wui-flex>\n\n        <wui-text variant="sm-regular" color="secondary">The code expires in 20 minutes</wui-text>\n\n        ','\n\n        <wui-flex alignItems="center" gap="2">\n          <wui-text variant="sm-regular" color="secondary">',"</wui-text>\n          <wui-link @click="," .disabled=",">\n            ","\n          </wui-link>\n        </wui-flex>\n      </wui-flex>\n    "])),["4","0","4","0"],["0","5","0","5"],this.email,this.loading?(0,o.qy)(T||(T=(0,r.A)(['<wui-loading-spinner size="xl" color="accent-primary"></wui-loading-spinner>']))):(0,o.qy)(S||(S=(0,r.A)([' <wui-flex flexDirection="column" alignItems="center" gap="2">\n              <wui-otp\n                dissabled\n                length="6"\n                @inputChange=',"\n                .otp=","\n              ></wui-otp>\n              ","\n            </wui-flex>"])),this.onOtpInputChange.bind(this),this.otp,this.error?(0,o.qy)(P||(P=(0,r.A)(['\n                    <wui-text variant="sm-regular" align="center" color="error">\n                      ',". Try Again\n                    </wui-text>\n                  "])),this.error):null),t.title,this.onResendCode.bind(this),e,t.action)}startOTPTimeout(){this.timeoutTimeLeft=A.Q.getTimeToNextEmailLogin(),this.OTPTimeout=setInterval((()=>{this.timeoutTimeLeft>0?this.timeoutTimeLeft=A.Q.getTimeToNextEmailLogin():clearInterval(this.OTPTimeout)}),1e3)}async onOtpInputChange(e){try{var t;if(!this.loading)if(this.otp=e.detail,this.shouldSubmitOnOtpChange())this.loading=!0,await(null===(t=this.onOtpSubmit)||void 0===t?void 0:t.call(this,this.otp))}catch(n){this.error=c.w.parseError(n),this.loading=!1}}async onResendCode(){try{if(this.onOtpResend){if(!this.loading&&!this.timeoutTimeLeft){this.error="",this.otp="";if(!s.a.getAuthConnector()||!this.email)throw new Error("w3m-email-otp-widget: Unable to resend email");this.loading=!0,await this.onOtpResend(this.email),this.startOTPTimeout(),u.P.showSuccess("Code email resent")}}else this.onStartOver&&this.onStartOver()}catch(e){u.P.showError(e)}finally{this.loading=!1}}getFooterLabels(e){return this.onStartOver?{title:"Something wrong?",action:"Try again ".concat(e?"in ".concat(this.timeoutTimeLeft,"s"):"")}:{title:"Didn't receive it?",action:"Resend ".concat(e?"in ".concat(this.timeoutTimeLeft,"s"):"Code")}}shouldSubmitOnOtpChange(){return this.authConnector&&this.otp.length===D.OTP_LENGTH}};F.OTP_LENGTH=6,F.styles=k,_([(0,a.wk)()],F.prototype,"loading",void 0),_([(0,a.wk)()],F.prototype,"timeoutTimeLeft",void 0),_([(0,a.wk)()],F.prototype,"error",void 0),F=D=_([(0,d.EM)("w3m-email-otp-widget")],F)}}]);
//# sourceMappingURL=9221.9fe62b24.chunk.js.map