"use strict";(self.webpackChunkpublish=self.webpackChunkpublish||[]).push([[8619],{26015:(e,t,n)=>{n.d(t,{g:()=>v});var r=n(30574),i=n(76844),o=n(268),s=n(60205),a=n(84657),c=n(24657),u=n(34739),l=n(595),d=n(65618),p=n(17321),m=n(79323),h=n(42661),y=n(7258);const g={paymentAsset:null,amount:null,tokenAmount:0,priceLoading:!1,error:null,exchanges:[],isLoading:!1,currentPayment:void 0,isPaymentInProgress:!1,paymentId:"",assets:[]},w=(0,r.BX)(g),v={state:w,subscribe:e=>(0,r.B1)(w,(()=>e(w))),subscribeKey:(e,t)=>(0,i.u$)(w,e,t),resetState(){Object.assign(w,{...g})},async getAssetsForNetwork(e){const t=(0,u.nj)(e),n=await v.getAssetsImageAndPrice(t),r=t.map((e=>{var t,r;const i="native"===e.asset?(0,s.K1)():"".concat(e.network,":").concat(e.asset),o=n.find((e=>{var t;return(null===(t=e.fungibles)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.address)||void 0===t?void 0:t.toLowerCase())===i.toLowerCase()}));return{...e,price:(null===o||void 0===o||null===(t=o.fungibles)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.price)||1,metadata:{...e.metadata,iconUrl:null===o||void 0===o||null===(r=o.fungibles)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.iconUrl}}}));return w.assets=r,r},async getAssetsImageAndPrice(e){const t=e.map((e=>"native"===e.asset?(0,s.K1)():"".concat(e.network,":").concat(e.asset)));return await Promise.all(t.map((e=>d.T.fetchTokenPrice({addresses:[e]}))))},getTokenAmount(){var e,t;if(null===w||void 0===w||null===(e=w.paymentAsset)||void 0===e||!e.price)throw new Error("Cannot get token price");const n=o.S.bigNumber(null!==(t=w.amount)&&void 0!==t?t:0).round(8),r=o.S.bigNumber(w.paymentAsset.price).round(8);return n.div(r).round(8).toNumber()},setAmount(e){var t;w.amount=e,null!==(t=w.paymentAsset)&&void 0!==t&&t.price&&(w.tokenAmount=v.getTokenAmount())},setPaymentAsset(e){w.paymentAsset=e},isPayWithExchangeEnabled(){var e,t,n;return(null===(e=h.H.state.remoteFeatures)||void 0===e?void 0:e.payWithExchange)||(null===(t=h.H.state.remoteFeatures)||void 0===t?void 0:t.payments)||(null===(n=h.H.state.features)||void 0===n?void 0:n.pay)},isPayWithExchangeSupported:()=>v.isPayWithExchangeEnabled()&&p.W.state.activeCaipNetwork&&a.oU.PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES.includes(p.W.state.activeCaipNetwork.chainNamespace),async fetchExchanges(){try{var e,t;const n=v.isPayWithExchangeSupported();if(!w.paymentAsset||!n)return w.exchanges=[],void(w.isLoading=!1);w.isLoading=!0;const r=await(0,u.ro)({page:0,asset:(0,u.lZ)(w.paymentAsset.network,w.paymentAsset.asset),amount:null!==(e=null===(t=w.amount)||void 0===t?void 0:t.toString())&&void 0!==e?e:"0"});w.exchanges=r.exchanges.slice(0,2)}catch(n){throw y.P.showError("Unable to get exchanges"),new Error("Unable to get exchanges")}finally{w.isLoading=!1}},async getPayUrl(e,t){try{const n=Number(t.amount),r=await(0,u.cz)({exchangeId:e,asset:(0,u.lZ)(t.network,t.asset),amount:n.toString(),recipient:"".concat(t.network,":").concat(t.recipient)});return m.E.sendEvent({type:"track",event:"PAY_EXCHANGE_SELECTED",properties:{exchange:{id:e},configuration:{network:t.network,asset:t.asset,recipient:t.recipient,amount:n},currentPayment:{type:"exchange",exchangeId:e},source:"fund-from-exchange",headless:!1}}),r}catch(n){if(n instanceof Error&&n.message.includes("is not supported"))throw new Error("Asset not supported");throw new Error(n.message)}},async handlePayWithExchange(e){try{if(!l.U.state.address)throw new Error("No account connected");if(!w.paymentAsset)throw new Error("No payment asset selected");const n=c.w.returnOpenHref("","popupWindow","scrollbar=yes,width=480,height=720");if(!n)throw new Error("Could not create popup window");w.isPaymentInProgress=!0,w.paymentId=crypto.randomUUID(),w.currentPayment={type:"exchange",exchangeId:e};const{network:r,asset:i}=w.paymentAsset,o={network:r,asset:i,amount:w.tokenAmount,recipient:l.U.state.address},s=await v.getPayUrl(e,o);if(!s){try{n.close()}catch(t){console.error("Unable to close popup window",t)}throw new Error("Unable to initiate payment")}w.currentPayment.sessionId=s.sessionId,w.currentPayment.status="IN_PROGRESS",w.currentPayment.exchangeId=e,n.location.href=s.url}catch(n){w.error="Unable to initiate payment",y.P.showError(w.error)}},async waitUntilComplete(e){let{exchangeId:t,sessionId:n,paymentId:r,retries:i=20}=e;const o=await v.getBuyStatus(t,n,r);if("SUCCESS"===o.status||"FAILED"===o.status)return o;if(0===i)throw new Error("Unable to get deposit status");return await new Promise((e=>{setTimeout(e,5e3)})),v.waitUntilComplete({exchangeId:t,sessionId:n,paymentId:r,retries:i-1})},async getBuyStatus(e,t,n){try{if(!w.currentPayment)throw new Error("No current payment");const d=await(0,u.V1)({sessionId:t,exchangeId:e});var r,i,o,s,a;if(w.currentPayment.status=d.status,"SUCCESS"===d.status||"FAILED"===d.status)w.currentPayment.result=d.txHash,w.isPaymentInProgress=!1,m.E.sendEvent({type:"track",event:"SUCCESS"===d.status?"PAY_SUCCESS":"PAY_ERROR",properties:{message:"FAILED"===d.status?c.w.parseError(w.error):void 0,source:"fund-from-exchange",paymentId:n,configuration:{network:(null===(r=w.paymentAsset)||void 0===r?void 0:r.network)||"",asset:(null===(i=w.paymentAsset)||void 0===i?void 0:i.asset)||"",recipient:l.U.state.address||"",amount:null!==(o=w.amount)&&void 0!==o?o:0},currentPayment:{type:"exchange",exchangeId:null===(s=w.currentPayment)||void 0===s?void 0:s.exchangeId,sessionId:null===(a=w.currentPayment)||void 0===a?void 0:a.sessionId,result:d.txHash}}});return d}catch(d){return{status:"UNKNOWN",txHash:""}}},reset(){w.currentPayment=void 0,w.isPaymentInProgress=!1,w.paymentId="",w.paymentAsset=null,w.amount=0,w.tokenAmount=0,w.priceLoading=!1,w.error=null,w.exchanges=[],w.isLoading=!1}}},18619:(e,t,n)=>{n.r(t),n.d(t,{W3mBuyInProgressView:()=>ee,W3mFundWalletView:()=>de,W3mOnRampProvidersView:()=>L,W3mOnrampFiatSelectView:()=>v,W3mOnrampTokensView:()=>K,W3mOnrampWidget:()=>Re,W3mWhatIsABuyView:()=>re});var r,i=n(57528),o=n(37022),s=n(56370),a=n(56440),c=n(5455),u=n(36596),l=n(68737),d=n(42661),p=n(73609),m=n(89268);n(84107),n(45770),n(84875),n(56326);const h=(0,m.AH)(r||(r=(0,i.A)(["\n  :host > wui-grid {\n    max-height: 360px;\n    overflow: auto;\n  }\n\n  wui-flex {\n    transition: opacity ","\n      ",";\n    will-change: opacity;\n  }\n\n  wui-grid::-webkit-scrollbar {\n    display: none;\n  }\n\n  wui-flex.disabled {\n    opacity: 0.3;\n    pointer-events: none;\n    user-select: none;\n  }\n"])),(e=>{let{easings:t}=e;return t["ease-out-power-1"]}),(e=>{let{durations:t}=e;return t.md}));var y,g,w=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let v=class extends o.WF{constructor(){super(),this.unsubscribe=[],this.selectedCurrency=c.aG.state.paymentCurrency,this.currencies=c.aG.state.paymentCurrencies,this.currencyImages=u.j.state.currencyImages,this.checked=l.o.state.isLegalCheckboxChecked,this.unsubscribe.push(c.aG.subscribe((e=>{this.selectedCurrency=e.paymentCurrency,this.currencies=e.paymentCurrencies})),u.j.subscribeKey("currencyImages",(e=>this.currencyImages=e)),l.o.subscribeKey("isLegalCheckboxChecked",(e=>{this.checked=e})))}disconnectedCallback(){this.unsubscribe.forEach((e=>e()))}render(){var e;const{termsConditionsUrl:t,privacyPolicyUrl:n}=d.H.state,r=null===(e=d.H.state.features)||void 0===e?void 0:e.legalCheckbox,s=Boolean(t||n)&&Boolean(r)&&!this.checked;return(0,o.qy)(y||(y=(0,i.A)(['\n      <w3m-legal-checkbox></w3m-legal-checkbox>\n      <wui-flex\n        flexDirection="column"\n        .padding=','\n        gap="2"\n        class=',"\n      >\n        ","\n      </wui-flex>\n    "])),["0","3","3","3"],(0,a.J)(s?"disabled":void 0),this.currenciesTemplate(s))}currenciesTemplate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.currencies.map((t=>{var n;return(0,o.qy)(g||(g=(0,i.A)(["\n        <wui-list-item\n          imageSrc=","\n          @click=",'\n          variant="image"\n          tabIdx=','\n        >\n          <wui-text variant="md-medium" color="primary">',"</wui-text>\n        </wui-list-item>\n      "])),(0,a.J)(null===(n=this.currencyImages)||void 0===n?void 0:n[t.id]),(()=>this.selectCurrency(t)),(0,a.J)(e?-1:void 0),t.id)}))}selectCurrency(e){e&&(c.aG.setPaymentCurrency(e),p.W.close())}};v.styles=h,w([(0,s.wk)()],v.prototype,"selectedCurrency",void 0),w([(0,s.wk)()],v.prototype,"currencies",void 0),w([(0,s.wk)()],v.prototype,"currencyImages",void 0),w([(0,s.wk)()],v.prototype,"checked",void 0),v=w([(0,m.EM)("w3m-onramp-fiat-select-view")],v);var f,b=n(17321),x=n(61139),k=n(24657),C=n(79323),P=n(60205),A=n(59979),I=n(1348);n(10477),n(21311),n(94582),n(90847);const E=(0,m.AH)(f||(f=(0,i.A)(["\n  button {\n    padding: ",";\n    border-radius: ",";\n    border: none;\n    outline: none;\n    background-color: ",";\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    gap: ",";\n    transition: background-color ","\n      ",";\n    will-change: background-color;\n    cursor: pointer;\n  }\n\n  button:hover {\n    background-color: ",";\n  }\n\n  .provider-image {\n    width: ",";\n    min-width: ",";\n    height: ",";\n    border-radius: calc(\n      "," - calc("," / 2)\n    );\n    position: relative;\n    overflow: hidden;\n  }\n\n  .network-icon {\n    width: ",";\n    height: ",";\n    border-radius: calc("," / 2);\n    overflow: hidden;\n    box-shadow:\n      0 0 0 3px ",",\n      0 0 0 3px ",";\n    transition: box-shadow ","\n      ",";\n    will-change: box-shadow;\n  }\n\n  button:hover .network-icon {\n    box-shadow:\n      0 0 0 3px ",",\n      0 0 0 3px ",";\n  }\n"])),(e=>{let{spacing:t}=e;return t[3]}),(e=>{let{borderRadius:t}=e;return t[4]}),(e=>{let{tokens:t}=e;return t.core.glass010}),(e=>{let{spacing:t}=e;return t[3]}),(e=>{let{easings:t}=e;return t["ease-out-power-1"]}),(e=>{let{durations:t}=e;return t.md}),(e=>{let{tokens:t}=e;return t.theme.foregroundPrimary}),(e=>{let{spacing:t}=e;return t[10]}),(e=>{let{spacing:t}=e;return t[10]}),(e=>{let{spacing:t}=e;return t[10]}),(e=>{let{borderRadius:t}=e;return t[4]}),(e=>{let{spacing:t}=e;return t[3]}),(e=>{let{spacing:t}=e;return t[3]}),(e=>{let{spacing:t}=e;return t[3]}),(e=>{let{spacing:t}=e;return t[3]}),(e=>{let{tokens:t}=e;return t.theme.foregroundPrimary}),(e=>{let{tokens:t}=e;return t.theme.backgroundPrimary}),(e=>{let{easings:t}=e;return t["ease-out-power-1"]}),(e=>{let{durations:t}=e;return t.md}),(e=>{let{tokens:t}=e;return t.core.glass010}),(e=>{let{tokens:t}=e;return t.theme.backgroundPrimary}));var R,O,W,S,j,N=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let T=class extends o.WF{constructor(){super(...arguments),this.disabled=!1,this.color="inherit",this.label="",this.feeRange="",this.loading=!1,this.onClick=null}render(){return(0,o.qy)(R||(R=(0,i.A)(["\n      <button ?disabled="," @click="," ontouchstart>\n        <wui-visual name=",' class="provider-image"></wui-visual>\n        <wui-flex flexDirection="column" gap="01">\n          <wui-text variant="md-regular" color="primary">','</wui-text>\n          <wui-flex alignItems="center" justifyContent="flex-start" gap="4">\n            <wui-text variant="sm-medium" color="primary">\n              <wui-text variant="sm-regular" color="secondary">Fees</wui-text>\n              ','\n            </wui-text>\n            <wui-flex gap="2">\n              <wui-icon name="bank" size="sm" color="default"></wui-icon>\n              <wui-icon name="card" size="sm" color="default"></wui-icon>\n            </wui-flex>\n            ',"\n          </wui-flex>\n        </wui-flex>\n        ","\n      </button>\n    "])),this.disabled,this.onClick,(0,a.J)(this.name),this.label,this.feeRange,this.networksTemplate(),this.loading?(0,o.qy)(O||(O=(0,i.A)(['<wui-loading-spinner color="secondary" size="md"></wui-loading-spinner>']))):(0,o.qy)(W||(W=(0,i.A)(['<wui-icon name="chevronRight" color="default" size="sm"></wui-icon>']))))}networksTemplate(){var e;const t=b.W.getAllRequestedCaipNetworks(),n=null===t||void 0===t||null===(e=t.filter((e=>{var t;return null===e||void 0===e||null===(t=e.assets)||void 0===t?void 0:t.imageId})))||void 0===e?void 0:e.slice(0,5);return(0,o.qy)(S||(S=(0,i.A)(['\n      <wui-flex class="networks">\n        ',"\n      </wui-flex>\n    "])),null===n||void 0===n?void 0:n.map((e=>(0,o.qy)(j||(j=(0,i.A)(['\n            <wui-flex class="network-icon">\n              <wui-image src=',"></wui-image>\n            </wui-flex>\n          "])),(0,a.J)(I.$.getNetworkImage(e))))))}};T.styles=[E],N([(0,s.MZ)({type:Boolean})],T.prototype,"disabled",void 0),N([(0,s.MZ)()],T.prototype,"color",void 0),N([(0,s.MZ)()],T.prototype,"name",void 0),N([(0,s.MZ)()],T.prototype,"label",void 0),N([(0,s.MZ)()],T.prototype,"feeRange",void 0),N([(0,s.MZ)({type:Boolean})],T.prototype,"loading",void 0),N([(0,s.MZ)()],T.prototype,"onClick",void 0),T=N([(0,m.EM)("w3m-onramp-provider-item")],T);n(70980);var U,D,q=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let L=class extends o.WF{constructor(){super(),this.unsubscribe=[],this.providers=c.aG.state.providers,this.unsubscribe.push(c.aG.subscribeKey("providers",(e=>{this.providers=e})))}render(){return(0,o.qy)(U||(U=(0,i.A)(['\n      <wui-flex flexDirection="column" .padding=',' gap="2">\n        ',"\n      </wui-flex>\n    "])),["0","3","3","3"],this.onRampProvidersTemplate())}onRampProvidersTemplate(){return this.providers.filter((e=>{var t;return e.supportedChains.includes(null!==(t=b.W.state.activeChain)&&void 0!==t?t:"eip155")})).map((e=>(0,o.qy)(D||(D=(0,i.A)(["\n          <w3m-onramp-provider-item\n            label=","\n            name=","\n            feeRange=","\n            @click=","\n            ?disabled=","\n            data-testid=","\n          ></w3m-onramp-provider-item>\n        "])),e.label,e.name,e.feeRange,(()=>{this.onClickProvider(e)}),!e.url,"onramp-provider-".concat(e.name))))}onClickProvider(e){var t;c.aG.setSelectedProvider(e),x.I.push("BuyInProgress"),k.w.openHref((null===(t=c.aG.state.selectedProvider)||void 0===t?void 0:t.url)||e.url,"popupWindow","width=600,height=800,scrollbars=yes"),C.E.sendEvent({type:"track",event:"SELECT_BUY_PROVIDER",properties:{provider:e.name,isSmartAccount:(0,P.lj)(b.W.state.activeChain)===A.Vl.ACCOUNT_TYPES.SMART_ACCOUNT}})}};q([(0,s.wk)()],L.prototype,"providers",void 0),L=q([(0,m.EM)("w3m-onramp-providers-view")],L);var F;n(455);const G=(0,m.AH)(F||(F=(0,i.A)(["\n  :host > wui-grid {\n    max-height: 360px;\n    overflow: auto;\n  }\n\n  wui-flex {\n    transition: opacity ","\n      ",";\n    will-change: opacity;\n  }\n\n  wui-grid::-webkit-scrollbar {\n    display: none;\n  }\n\n  wui-flex.disabled {\n    opacity: 0.3;\n    pointer-events: none;\n    user-select: none;\n  }\n"])),(e=>{let{easings:t}=e;return t["ease-out-power-1"]}),(e=>{let{durations:t}=e;return t.md}));var B,M,H=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let K=class extends o.WF{constructor(){super(),this.unsubscribe=[],this.selectedCurrency=c.aG.state.purchaseCurrencies,this.tokens=c.aG.state.purchaseCurrencies,this.tokenImages=u.j.state.tokenImages,this.checked=l.o.state.isLegalCheckboxChecked,this.unsubscribe.push(c.aG.subscribe((e=>{this.selectedCurrency=e.purchaseCurrencies,this.tokens=e.purchaseCurrencies})),u.j.subscribeKey("tokenImages",(e=>this.tokenImages=e)),l.o.subscribeKey("isLegalCheckboxChecked",(e=>{this.checked=e})))}disconnectedCallback(){this.unsubscribe.forEach((e=>e()))}render(){var e;const{termsConditionsUrl:t,privacyPolicyUrl:n}=d.H.state,r=null===(e=d.H.state.features)||void 0===e?void 0:e.legalCheckbox,s=Boolean(t||n)&&Boolean(r)&&!this.checked;return(0,o.qy)(B||(B=(0,i.A)(['\n      <w3m-legal-checkbox></w3m-legal-checkbox>\n      <wui-flex\n        flexDirection="column"\n        .padding=','\n        gap="2"\n        class=',"\n      >\n        ","\n      </wui-flex>\n    "])),["0","3","3","3"],(0,a.J)(s?"disabled":void 0),this.currenciesTemplate(s))}currenciesTemplate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.tokens.map((t=>{var n;return(0,o.qy)(M||(M=(0,i.A)(["\n        <wui-list-item\n          imageSrc=","\n          @click=",'\n          variant="image"\n          tabIdx=','\n        >\n          <wui-flex gap="1" alignItems="center">\n            <wui-text variant="md-medium" color="primary">','</wui-text>\n            <wui-text variant="sm-regular" color="secondary">',"</wui-text>\n          </wui-flex>\n        </wui-list-item>\n      "])),(0,a.J)(null===(n=this.tokenImages)||void 0===n?void 0:n[t.symbol]),(()=>this.selectToken(t)),(0,a.J)(e?-1:void 0),t.name,t.symbol)}))}selectToken(e){e&&(c.aG.setPurchaseCurrency(e),p.W.close())}};K.styles=G,H([(0,s.wk)()],K.prototype,"selectedCurrency",void 0),H([(0,s.wk)()],K.prototype,"tokens",void 0),H([(0,s.wk)()],K.prototype,"tokenImages",void 0),H([(0,s.wk)()],K.prototype,"checked",void 0),K=H([(0,m.EM)("w3m-onramp-token-select-view")],K);var _,z=n(23743),Z=n(36141),J=n(7258);n(92016),n(60677),n(43901),n(27667);const V=(0,m.AH)(_||(_=(0,i.A)(["\n  @keyframes shake {\n    0% {\n      transform: translateX(0);\n    }\n    25% {\n      transform: translateX(3px);\n    }\n    50% {\n      transform: translateX(-3px);\n    }\n    75% {\n      transform: translateX(3px);\n    }\n    100% {\n      transform: translateX(0);\n    }\n  }\n\n  wui-flex:first-child:not(:only-child) {\n    position: relative;\n  }\n\n  wui-loading-thumbnail {\n    position: absolute;\n  }\n\n  wui-visual {\n    border-radius: calc(\n      "," * 9 - ","\n    );\n    position: relative;\n    overflow: hidden;\n  }\n\n  wui-icon-box {\n    position: absolute;\n    right: calc("," * -1);\n    bottom: calc("," * -1);\n    opacity: 0;\n    transform: scale(0.5);\n    transition:\n      opacity "," ",",\n      transform ","\n        ",";\n    will-change: opacity, transform;\n  }\n\n  wui-text[align='center'] {\n    width: 100%;\n    padding: 0px ",";\n  }\n\n  [data-error='true'] wui-icon-box {\n    opacity: 1;\n    transform: scale(1);\n  }\n\n  [data-error='true'] > wui-flex:first-child {\n    animation: shake 250ms "," both;\n  }\n\n  [data-retry='false'] wui-link {\n    display: none;\n  }\n\n  [data-retry='true'] wui-link {\n    display: block;\n    opacity: 1;\n  }\n\n  wui-link {\n    padding: "," ",";\n  }\n"])),(e=>{let{borderRadius:t}=e;return t[1]}),(e=>{let{borderRadius:t}=e;return t[3]}),(e=>{let{spacing:t}=e;return t[1]}),(e=>{let{spacing:t}=e;return t[1]}),(e=>{let{durations:t}=e;return t.lg}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}),(e=>{let{durations:t}=e;return t.lg}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}),(e=>{let{spacing:t}=e;return t[4]}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}),(e=>{let{spacing:t}=e;return t["01"]}),(e=>{let{spacing:t}=e;return t[2]}));var X,Y,Q,$=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ee=class extends o.WF{constructor(){super(),this.unsubscribe=[],this.selectedOnRampProvider=c.aG.state.selectedProvider,this.uri=z.x.state.wcUri,this.ready=!1,this.showRetry=!1,this.buffering=!1,this.error=!1,this.isMobile=!1,this.onRetry=void 0,this.unsubscribe.push(c.aG.subscribeKey("selectedProvider",(e=>{this.selectedOnRampProvider=e})))}disconnectedCallback(){this.intervalId&&clearInterval(this.intervalId)}render(){var e;let t="Continue in external window";if(this.error)t="Buy failed";else if(this.selectedOnRampProvider){var n;t="Buy in ".concat(null===(n=this.selectedOnRampProvider)||void 0===n?void 0:n.label)}const r=this.error?"Buy can be declined from your side or due to and error on the provider app":"We\u2019ll notify you once your Buy is processed";return(0,o.qy)(X||(X=(0,i.A)(["\n      <wui-flex\n        data-error=","\n        data-retry=",'\n        flexDirection="column"\n        alignItems="center"\n        .padding=','\n        gap="5"\n      >\n        <wui-flex justifyContent="center" alignItems="center">\n          <wui-visual\n            name=','\n            size="lg"\n            class="provider-image"\n          >\n          </wui-visual>\n\n          ','\n\n          <wui-icon-box\n            color="error"\n            icon="close"\n            size="sm"\n            border\n            borderColor="wui-color-bg-125"\n          ></wui-icon-box>\n        </wui-flex>\n\n        <wui-flex\n          flexDirection="column"\n          alignItems="center"\n          gap="2"\n          .padding=','\n        >\n          <wui-text variant="md-medium" color=',">\n            ",'\n          </wui-text>\n          <wui-text align="center" variant="sm-medium" color="secondary">',"</wui-text>\n        </wui-flex>\n\n        ","\n      </wui-flex>\n\n      <wui-flex .padding=",' justifyContent="center">\n        <wui-link @click=',' color="secondary">\n          <wui-icon size="sm" color="default" slot="iconLeft" name="copy"></wui-icon>\n          Copy link\n        </wui-link>\n      </wui-flex>\n    '])),(0,a.J)(this.error),this.showRetry,["10","5","5","5"],(0,a.J)(null===(e=this.selectedOnRampProvider)||void 0===e?void 0:e.name),this.error?null:this.loaderTemplate(),["4","0","0","0"],this.error?"error":"primary",t,r,this.error?this.tryAgainTemplate():null,["0","5","5","5"],this.onCopyUri)}onTryAgain(){this.selectedOnRampProvider&&(this.error=!1,k.w.openHref(this.selectedOnRampProvider.url,"popupWindow","width=600,height=800,scrollbars=yes"))}tryAgainTemplate(){var e;return null!==(e=this.selectedOnRampProvider)&&void 0!==e&&e.url?(0,o.qy)(Y||(Y=(0,i.A)(['<wui-button size="md" variant="accent" @click=','>\n      <wui-icon color="inherit" slot="iconLeft" name="refresh"></wui-icon>\n      Try again\n    </wui-button>'])),this.onTryAgain.bind(this)):null}loaderTemplate(){const e=Z.W.state.themeVariables["--w3m-border-radius-master"],t=e?parseInt(e.replace("px",""),10):4;return(0,o.qy)(Q||(Q=(0,i.A)(["<wui-loading-thumbnail radius=","></wui-loading-thumbnail>"])),9*t)}onCopyUri(){var e;if(null===(e=this.selectedOnRampProvider)||void 0===e||!e.url)return J.P.showError("No link found"),void x.I.goBack();try{k.w.copyToClopboard(this.selectedOnRampProvider.url),J.P.showSuccess("Link copied")}catch{J.P.showError("Failed to copy")}}};var te;ee.styles=V,$([(0,s.wk)()],ee.prototype,"intervalId",void 0),$([(0,s.wk)()],ee.prototype,"selectedOnRampProvider",void 0),$([(0,s.wk)()],ee.prototype,"uri",void 0),$([(0,s.wk)()],ee.prototype,"ready",void 0),$([(0,s.wk)()],ee.prototype,"showRetry",void 0),$([(0,s.wk)()],ee.prototype,"buffering",void 0),$([(0,s.wk)()],ee.prototype,"error",void 0),$([(0,s.MZ)({type:Boolean})],ee.prototype,"isMobile",void 0),$([(0,s.MZ)()],ee.prototype,"onRetry",void 0),ee=$([(0,m.EM)("w3m-buy-in-progress-view")],ee);var ne=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let re=class extends o.WF{render(){return(0,o.qy)(te||(te=(0,i.A)(['\n      <wui-flex\n        flexDirection="column"\n        .padding=','\n        alignItems="center"\n        gap="5"\n      >\n        <wui-visual name="onrampCard"></wui-visual>\n        <wui-flex flexDirection="column" gap="2" alignItems="center">\n          <wui-text align="center" variant="md-medium" color="primary">\n            Quickly and easily buy digital assets!\n          </wui-text>\n          <wui-text align="center" variant="sm-regular" color="secondary">\n            Simply select your preferred onramp provider and add digital assets to your account\n            using your credit card or bank transfer\n          </wui-text>\n        </wui-flex>\n        <wui-button @click=','>\n          <wui-icon size="sm" color="inherit" name="add" slot="iconLeft"></wui-icon>\n          Buy\n        </wui-button>\n      </wui-flex>\n    '])),["6","10","5","10"],x.I.goBack)}};re=ne([(0,m.EM)("w3m-what-is-a-buy-view")],re);var ie,oe,se,ae,ce=n(26015),ue=n(84657),le=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let de=class extends o.WF{constructor(){super(),this.unsubscribe=[],this.activeCaipNetwork=b.W.state.activeCaipNetwork,this.features=d.H.state.features,this.remoteFeatures=d.H.state.remoteFeatures,this.exchangesLoading=ce.g.state.isLoading,this.exchanges=ce.g.state.exchanges,this.unsubscribe.push(d.H.subscribeKey("features",(e=>this.features=e)),d.H.subscribeKey("remoteFeatures",(e=>this.remoteFeatures=e)),b.W.subscribeKey("activeCaipNetwork",(e=>{this.activeCaipNetwork=e,this.setDefaultPaymentAsset()})),ce.g.subscribeKey("isLoading",(e=>this.exchangesLoading=e)),ce.g.subscribeKey("exchanges",(e=>this.exchanges=e)))}disconnectedCallback(){this.unsubscribe.forEach((e=>e()))}async firstUpdated(){ce.g.isPayWithExchangeSupported()&&(await this.setDefaultPaymentAsset(),await ce.g.fetchExchanges())}render(){return(0,o.qy)(ie||(ie=(0,i.A)(['\n      <wui-flex flexDirection="column" .padding=',' gap="2">\n        '," "," ","\n      </wui-flex>\n    "])),["1","3","3","3"],this.onrampTemplate(),this.receiveTemplate(),this.depositFromExchangeTemplate())}async setDefaultPaymentAsset(){if(!this.activeCaipNetwork)return;const e=await ce.g.getAssetsForNetwork(this.activeCaipNetwork.caipNetworkId),t=e.find((e=>"USDC"===e.metadata.symbol))||e[0];t&&ce.g.setPaymentAsset(t)}onrampTemplate(){var e;if(!this.activeCaipNetwork)return null;const t=null===(e=this.remoteFeatures)||void 0===e?void 0:e.onramp,n=ue.oU.ONRAMP_SUPPORTED_CHAIN_NAMESPACES.includes(this.activeCaipNetwork.chainNamespace);return t&&n?(0,o.qy)(oe||(oe=(0,i.A)(["\n      <wui-list-item\n        @click=",'\n        icon="card"\n        data-testid="wallet-features-onramp-button"\n      >\n        <wui-text variant="lg-regular" color="primary">Buy crypto</wui-text>\n      </wui-list-item>\n    '])),this.onBuyCrypto.bind(this)):null}depositFromExchangeTemplate(){if(!this.activeCaipNetwork)return null;return ce.g.isPayWithExchangeSupported()?(0,o.qy)(se||(se=(0,i.A)(["\n      <wui-list-item\n        @click=",'\n        icon="download"\n        data-testid="wallet-features-deposit-from-exchange-button"\n        ?loading=',"\n        ?disabled=",'\n      >\n        <wui-text variant="lg-regular" color="primary">Deposit from exchange</wui-text>\n      </wui-list-item>\n    '])),this.onDepositFromExchange.bind(this),this.exchangesLoading,this.exchangesLoading||!this.exchanges.length):null}receiveTemplate(){var e;return Boolean(null===(e=this.features)||void 0===e?void 0:e.receive)?(0,o.qy)(ae||(ae=(0,i.A)(["\n      <wui-list-item\n        @click=",'\n        icon="qrCode"\n        data-testid="wallet-features-receive-button"\n      >\n        <wui-text variant="lg-regular" color="primary">Receive funds</wui-text>\n      </wui-list-item>\n    '])),this.onReceive.bind(this)):null}onBuyCrypto(){x.I.push("OnRampProviders")}onReceive(){x.I.push("WalletReceive")}onDepositFromExchange(){x.I.push("PayWithExchange")}};le([(0,s.wk)()],de.prototype,"activeCaipNetwork",void 0),le([(0,s.wk)()],de.prototype,"features",void 0),le([(0,s.wk)()],de.prototype,"remoteFeatures",void 0),le([(0,s.wk)()],de.prototype,"exchangesLoading",void 0),le([(0,s.wk)()],de.prototype,"exchanges",void 0),de=le([(0,m.EM)("w3m-fund-wallet-view")],de);var pe;n(76184);const me=(0,m.AH)(pe||(pe=(0,i.A)(["\n  :host {\n    width: 100%;\n  }\n\n  wui-loading-spinner {\n    position: absolute;\n    top: 50%;\n    right: 20px;\n    transform: translateY(-50%);\n  }\n\n  .currency-container {\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    right: ",";\n    height: 40px;\n    padding: "," ","\n      "," ",";\n    min-width: 95px;\n    border-radius: ",";\n    border: 1px solid ",";\n    background: ",";\n    cursor: pointer;\n  }\n\n  .currency-container > wui-image {\n    height: 24px;\n    width: 24px;\n    border-radius: 50%;\n  }\n"])),(e=>{let{spacing:t}=e;return t[2]}),(e=>{let{spacing:t}=e;return t[2]}),(e=>{let{spacing:t}=e;return t[2]}),(e=>{let{spacing:t}=e;return t[2]}),(e=>{let{spacing:t}=e;return t[2]}),(e=>{let{borderRadius:t}=e;return t.round}),(e=>{let{tokens:t}=e;return t.theme.foregroundPrimary}),(e=>{let{tokens:t}=e;return t.theme.foregroundPrimary}));var he,ye,ge,we=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ve=class extends o.WF{constructor(){var e;super(),this.unsubscribe=[],this.type="Token",this.value=0,this.currencies=[],this.selectedCurrency=null===(e=this.currencies)||void 0===e?void 0:e[0],this.currencyImages=u.j.state.currencyImages,this.tokenImages=u.j.state.tokenImages,this.unsubscribe.push(c.aG.subscribeKey("purchaseCurrency",(e=>{e&&"Fiat"!==this.type&&(this.selectedCurrency=this.formatPurchaseCurrency(e))})),c.aG.subscribeKey("paymentCurrency",(e=>{e&&"Token"!==this.type&&(this.selectedCurrency=this.formatPaymentCurrency(e))})),c.aG.subscribe((e=>{"Fiat"===this.type?this.currencies=e.purchaseCurrencies.map(this.formatPurchaseCurrency):this.currencies=e.paymentCurrencies.map(this.formatPaymentCurrency)})),u.j.subscribe((e=>{this.currencyImages={...e.currencyImages},this.tokenImages={...e.tokenImages}})))}firstUpdated(){c.aG.getAvailableCurrencies()}disconnectedCallback(){this.unsubscribe.forEach((e=>e()))}render(){var e;const t=(null===(e=this.selectedCurrency)||void 0===e?void 0:e.symbol)||"",n=this.currencyImages[t]||this.tokenImages[t];return(0,o.qy)(he||(he=(0,i.A)(['<wui-input-text type="number" size="lg" value=',">\n      ","\n    </wui-input-text>"])),this.value,this.selectedCurrency?(0,o.qy)(ye||(ye=(0,i.A)([' <wui-flex\n            class="currency-container"\n            justifyContent="space-between"\n            alignItems="center"\n            gap="1"\n            @click=',"\n          >\n            <wui-image src=",'></wui-image>\n            <wui-text color="primary">',"</wui-text>\n          </wui-flex>"])),(()=>p.W.open({view:"OnRamp".concat(this.type,"Select")})),(0,a.J)(n),this.selectedCurrency.symbol):(0,o.qy)(ge||(ge=(0,i.A)(["<wui-loading-spinner></wui-loading-spinner>"]))))}formatPaymentCurrency(e){return{name:e.id,symbol:e.id}}formatPurchaseCurrency(e){return{name:e.name,symbol:e.symbol}}};var fe;ve.styles=me,we([(0,s.MZ)({type:String})],ve.prototype,"type",void 0),we([(0,s.MZ)({type:Number})],ve.prototype,"value",void 0),we([(0,s.wk)()],ve.prototype,"currencies",void 0),we([(0,s.wk)()],ve.prototype,"selectedCurrency",void 0),we([(0,s.wk)()],ve.prototype,"currencyImages",void 0),we([(0,s.wk)()],ve.prototype,"tokenImages",void 0),ve=we([(0,m.EM)("w3m-onramp-input")],ve);const be=(0,m.AH)(fe||(fe=(0,i.A)(["\n  :host > wui-flex {\n    width: 100%;\n    max-width: 360px;\n  }\n\n  :host > wui-flex > wui-flex {\n    border-radius: ",";\n    width: 100%;\n  }\n\n  .amounts-container {\n    width: 100%;\n  }\n"])),(e=>{let{borderRadius:t}=e;return t[8]}));var xe,ke,Ce,Pe,Ae=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const Ie={USD:"$",EUR:"\u20ac",GBP:"\xa3"},Ee=[100,250,500,1e3];let Re=class extends o.WF{constructor(){super(),this.unsubscribe=[],this.disabled=!1,this.caipAddress=b.W.state.activeCaipAddress,this.loading=p.W.state.loading,this.paymentCurrency=c.aG.state.paymentCurrency,this.paymentAmount=c.aG.state.paymentAmount,this.purchaseAmount=c.aG.state.purchaseAmount,this.quoteLoading=c.aG.state.quotesLoading,this.unsubscribe.push(b.W.subscribeKey("activeCaipAddress",(e=>this.caipAddress=e)),p.W.subscribeKey("loading",(e=>{this.loading=e})),c.aG.subscribe((e=>{this.paymentCurrency=e.paymentCurrency,this.paymentAmount=e.paymentAmount,this.purchaseAmount=e.purchaseAmount,this.quoteLoading=e.quotesLoading})))}disconnectedCallback(){this.unsubscribe.forEach((e=>e()))}render(){return(0,o.qy)(xe||(xe=(0,i.A)(['\n      <wui-flex flexDirection="column" justifyContent="center" alignItems="center">\n        <wui-flex flexDirection="column" alignItems="center" gap="2">\n          <w3m-onramp-input\n            type="Fiat"\n            @inputChange=',"\n            .value=",'\n          ></w3m-onramp-input>\n          <w3m-onramp-input\n            type="Token"\n            .value=',"\n            .loading=",'\n          ></w3m-onramp-input>\n          <wui-flex justifyContent="space-evenly" class="amounts-container" gap="2">\n            ',"\n          </wui-flex>\n          ","\n        </wui-flex>\n      </wui-flex>\n    "])),this.onPaymentAmountChange.bind(this),this.paymentAmount||0,this.purchaseAmount||0,this.quoteLoading,Ee.map((e=>{var t;return(0,o.qy)(ke||(ke=(0,i.A)(["<wui-button\n                  variant=",'\n                  size="md"\n                  textVariant="md-medium"\n                  fullWidth\n                  @click=',"\n                  >","</wui-button\n                >"])),this.paymentAmount===e?"accent-secondary":"neutral-secondary",(()=>this.selectPresetAmount(e)),"".concat(Ie[(null===(t=this.paymentCurrency)||void 0===t?void 0:t.id)||"USD"]," ").concat(e))})),this.templateButton())}templateButton(){return this.caipAddress?(0,o.qy)(Ce||(Ce=(0,i.A)(["<wui-button\n          @click=",'\n          variant="accent-primary"\n          fullWidth\n          size="lg"\n          borderRadius="xs"\n        >\n          Get quotes\n        </wui-button>'])),this.getQuotes.bind(this)):(0,o.qy)(Pe||(Pe=(0,i.A)(["<wui-button\n          @click=",'\n          variant="accent"\n          fullWidth\n          size="lg"\n          borderRadius="xs"\n        >\n          Connect wallet\n        </wui-button>'])),this.openModal.bind(this))}getQuotes(){this.loading||p.W.open({view:"OnRampProviders"})}openModal(){p.W.open({view:"Connect"})}async onPaymentAmountChange(e){c.aG.setPaymentAmount(Number(e.detail)),await c.aG.getQuote()}async selectPresetAmount(e){c.aG.setPaymentAmount(e),await c.aG.getQuote()}};Re.styles=be,Ae([(0,s.MZ)({type:Boolean})],Re.prototype,"disabled",void 0),Ae([(0,s.wk)()],Re.prototype,"caipAddress",void 0),Ae([(0,s.wk)()],Re.prototype,"loading",void 0),Ae([(0,s.wk)()],Re.prototype,"paymentCurrency",void 0),Ae([(0,s.wk)()],Re.prototype,"paymentAmount",void 0),Ae([(0,s.wk)()],Re.prototype,"purchaseAmount",void 0),Ae([(0,s.wk)()],Re.prototype,"quoteLoading",void 0),Re=Ae([(0,m.EM)("w3m-onramp-widget")],Re)},21311:(e,t,n)=>{n(71056)}}]);
//# sourceMappingURL=8619.cab3675a.chunk.js.map