"use strict";(self.webpackChunkpublish=self.webpackChunkpublish||[]).push([[1191],{51191:(e,t,n)=>{n.r(t),n.d(t,{W3mConnectSocialsView:()=>S,W3mConnectingFarcasterView:()=>re,W3mConnectingSocialView:()=>z});var i,o=n(57528),r=n(37022),s=n(56370),a=n(56440),c=n(68737),l=n(42661),d=n(89268),u=(n(84107),n(56326),n(25015)),h=n(61139),p=n(84657),w=n(63542),m=n(17372),g=n(24657),v=(n(3892),n(58139));const f=(0,d.AH)(i||(i=(0,o.A)(["\n  :host {\n    margin-top: ",";\n  }\n  wui-separator {\n    margin: "," calc("," * -1)\n      "," calc("," * -1);\n    width: calc(100% + "," * 2);\n  }\n"])),(e=>{let{spacing:t}=e;return t[1]}),(e=>{let{spacing:t}=e;return t[3]}),(e=>{let{spacing:t}=e;return t[3]}),(e=>{let{spacing:t}=e;return t[2]}),(e=>{let{spacing:t}=e;return t[3]}),(e=>{let{spacing:t}=e;return t[3]}));var y,b,x=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};let C=class extends r.WF{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=u.a.state.connectors,this.authConnector=this.connectors.find((e=>"AUTH"===e.type)),this.remoteFeatures=l.H.state.remoteFeatures,this.isPwaLoading=!1,this.unsubscribe.push(u.a.subscribeKey("connectors",(e=>{this.connectors=e,this.authConnector=this.connectors.find((e=>"AUTH"===e.type))})),l.H.subscribeKey("remoteFeatures",(e=>this.remoteFeatures=e)))}connectedCallback(){super.connectedCallback(),this.handlePwaFrameLoad()}disconnectedCallback(){this.unsubscribe.forEach((e=>e()))}render(){var e,t;let n=(null===(e=this.remoteFeatures)||void 0===e?void 0:e.socials)||[];const i=Boolean(this.authConnector),s=null===(t=n)||void 0===t?void 0:t.length,a="ConnectSocials"===h.I.state.view;return i&&s||a?(a&&!s&&(n=p.oU.DEFAULT_SOCIALS),(0,r.qy)(y||(y=(0,o.A)([' <wui-flex flexDirection="column" gap="2">\n      ',"\n    </wui-flex>"])),n.map((e=>(0,r.qy)(b||(b=(0,o.A)(["<wui-list-social\n            @click=","\n            data-testid=","\n            name=","\n            logo=","\n            ?disabled=","\n          ></wui-list-social>"])),(()=>{this.onSocialClick(e)}),"social-selector-".concat(e),e,e,this.isPwaLoading))))):null}async onSocialClick(e){e&&await(0,m.Up)(e)}async handlePwaFrameLoad(){if(g.w.isPWA()){this.isPwaLoading=!0;try{var e;(null===(e=this.authConnector)||void 0===e?void 0:e.provider)instanceof v.Y&&await this.authConnector.provider.init()}catch(t){w.h.open({displayMessage:"Error loading embedded wallet in PWA",debugMessage:t.message},"error")}finally{this.isPwaLoading=!1}}}};var k;C.styles=f,x([(0,s.MZ)()],C.prototype,"tabIdx",void 0),x([(0,s.wk)()],C.prototype,"connectors",void 0),x([(0,s.wk)()],C.prototype,"authConnector",void 0),x([(0,s.wk)()],C.prototype,"remoteFeatures",void 0),x([(0,s.wk)()],C.prototype,"isPwaLoading",void 0),C=x([(0,d.EM)("w3m-social-login-list")],C);const P=(0,d.AH)(k||(k=(0,o.A)(["\n  wui-flex {\n    max-height: clamp(360px, 540px, 80vh);\n    overflow: scroll;\n    scrollbar-width: none;\n    transition: opacity ","\n      ",";\n    will-change: opacity;\n  }\n\n  wui-flex::-webkit-scrollbar {\n    display: none;\n  }\n\n  wui-flex.disabled {\n    opacity: 0.3;\n    pointer-events: none;\n    user-select: none;\n  }\n"])),(e=>{let{durations:t}=e;return t.md}),(e=>{let{easings:t}=e;return t["ease-out-power-1"]}));var E,A=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};let S=class extends r.WF{constructor(){super(),this.unsubscribe=[],this.checked=c.o.state.isLegalCheckboxChecked,this.unsubscribe.push(c.o.subscribeKey("isLegalCheckboxChecked",(e=>{this.checked=e})))}disconnectedCallback(){this.unsubscribe.forEach((e=>e()))}render(){var e;const{termsConditionsUrl:t,privacyPolicyUrl:n}=l.H.state,i=null===(e=l.H.state.features)||void 0===e?void 0:e.legalCheckbox,s=Boolean(t||n)&&Boolean(i)&&!this.checked,c=s?-1:void 0;return(0,r.qy)(E||(E=(0,o.A)(['\n      <w3m-legal-checkbox></w3m-legal-checkbox>\n      <wui-flex\n        flexDirection="column"\n        .padding=','\n        gap="01"\n        class=',"\n      >\n        <w3m-social-login-list tabIdx=","></w3m-social-login-list>\n      </wui-flex>\n    "])),["0","3","3","3"],(0,a.J)(s?"disabled":void 0),(0,a.J)(c))}};S.styles=P,A([(0,s.wk)()],S.prototype,"checked",void 0),S=A([(0,d.EM)("w3m-connect-socials-view")],S);var I,W=n(595),L=n(23743),U=n(17321),R=n(79323),O=n(88861),T=n(7258),F=n(73609),q=n(36141),_=(n(60677),n(27667),n(47528),n(84875),n(90640)),D=n(91391);const H=(0,d.AH)(I||(I=(0,o.A)(["\n  wui-logo {\n    width: 80px;\n    height: 80px;\n    border-radius: ",";\n  }\n  @keyframes shake {\n    0% {\n      transform: translateX(0);\n    }\n    25% {\n      transform: translateX(3px);\n    }\n    50% {\n      transform: translateX(-3px);\n    }\n    75% {\n      transform: translateX(3px);\n    }\n    100% {\n      transform: translateX(0);\n    }\n  }\n  wui-flex:first-child:not(:only-child) {\n    position: relative;\n  }\n  wui-loading-thumbnail {\n    position: absolute;\n  }\n  wui-icon-box {\n    position: absolute;\n    right: calc("," * -1);\n    bottom: calc("," * -1);\n    opacity: 0;\n    transform: scale(0.5);\n    transition: all ","\n      ",";\n  }\n  wui-text[align='center'] {\n    width: 100%;\n    padding: 0px ",";\n  }\n  [data-error='true'] wui-icon-box {\n    opacity: 1;\n    transform: scale(1);\n  }\n  [data-error='true'] > wui-flex:first-child {\n    animation: shake 250ms "," both;\n  }\n  .capitalize {\n    text-transform: capitalize;\n  }\n"])),(e=>{let{borderRadius:t}=e;return t[8]}),(e=>{let{spacing:t}=e;return t[1]}),(e=>{let{spacing:t}=e;return t[1]}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}),(e=>{let{durations:t}=e;return t.lg}),(e=>{let{spacing:t}=e;return t[4]}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}));var j,M,N=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};let z=class extends r.WF{constructor(){super(),this.unsubscribe=[],this.socialProvider=W.U.state.socialProvider,this.socialWindow=W.U.state.socialWindow,this.error=!1,this.connecting=!1,this.message="Connect in the provider window",this.remoteFeatures=l.H.state.remoteFeatures,this.address=W.U.state.address,this.connectionsByNamespace=L.x.getConnections(U.W.state.activeChain),this.hasMultipleConnections=this.connectionsByNamespace.length>0,this.authConnector=u.a.getAuthConnector(),this.handleSocialConnection=async e=>{var t;if(null!==(t=e.data)&&void 0!==t&&t.resultUri)if(e.origin===D.o.SECURE_SITE_ORIGIN){window.removeEventListener("message",this.handleSocialConnection,!1);try{if(this.authConnector&&!this.connecting){this.socialWindow&&(this.socialWindow.close(),W.U.setSocialWindow(void 0,U.W.state.activeChain)),this.connecting=!0,this.updateMessage();const t=e.data.resultUri;this.socialProvider&&R.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:this.socialProvider}}),await L.x.connectExternal({id:this.authConnector.id,type:this.authConnector.type,socialUri:t},this.authConnector.chain),this.socialProvider&&(O.i.setConnectedSocialProvider(this.socialProvider),R.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:this.socialProvider}}))}}catch(n){this.error=!0,this.updateMessage(),this.socialProvider&&R.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:this.socialProvider,message:g.w.parseError(n)}})}}else h.I.goBack(),T.P.showError("Untrusted Origin"),this.socialProvider&&R.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:this.socialProvider,message:"Untrusted Origin"}})};_.R.EmbeddedWalletAbortController.signal.addEventListener("abort",(()=>{this.socialWindow&&(this.socialWindow.close(),W.U.setSocialWindow(void 0,U.W.state.activeChain))})),this.unsubscribe.push(W.U.subscribe((e=>{e.socialProvider&&(this.socialProvider=e.socialProvider),e.socialWindow&&(this.socialWindow=e.socialWindow)})),l.H.subscribeKey("remoteFeatures",(e=>{this.remoteFeatures=e})),W.U.subscribeKey("address",(e=>{var t;const n=null===(t=this.remoteFeatures)||void 0===t?void 0:t.multiWallet;e&&e!==this.address&&(this.hasMultipleConnections&&n?(h.I.replace("ProfileWallets"),T.P.showSuccess("New Wallet Added")):(F.W.state.open||l.H.state.enableEmbedded)&&F.W.close())}))),this.authConnector&&this.connectSocial()}disconnectedCallback(){var e;this.unsubscribe.forEach((e=>e())),window.removeEventListener("message",this.handleSocialConnection,!1),null===(e=this.socialWindow)||void 0===e||e.close(),W.U.setSocialWindow(void 0,U.W.state.activeChain)}render(){var e;return(0,r.qy)(j||(j=(0,o.A)(["\n      <wui-flex\n        data-error=",'\n        flexDirection="column"\n        alignItems="center"\n        .padding=','\n        gap="6"\n      >\n        <wui-flex justifyContent="center" alignItems="center">\n          <wui-logo logo=',"></wui-logo>\n          ",'\n          <wui-icon-box color="error" icon="close" size="sm"></wui-icon-box>\n        </wui-flex>\n        <wui-flex flexDirection="column" alignItems="center" gap="2">\n          <wui-text align="center" variant="lg-medium" color="primary"\n            >Log in with\n            <span class="capitalize">','</span></wui-text\n          >\n          <wui-text align="center" variant="lg-regular" color=',"\n            >","</wui-text\n          ></wui-flex\n        >\n      </wui-flex>\n    "])),(0,a.J)(this.error),["10","5","5","5"],(0,a.J)(this.socialProvider),this.error?null:this.loaderTemplate(),null!==(e=this.socialProvider)&&void 0!==e?e:"Social",this.error?"error":"secondary",this.message)}loaderTemplate(){const e=q.W.state.themeVariables["--w3m-border-radius-master"],t=e?parseInt(e.replace("px",""),10):4;return(0,r.qy)(M||(M=(0,o.A)(["<wui-loading-thumbnail radius=","></wui-loading-thumbnail>"])),9*t)}connectSocial(){const e=setInterval((()=>{var t;null!==(t=this.socialWindow)&&void 0!==t&&t.closed&&(this.connecting||"ConnectingSocial"!==h.I.state.view||(this.socialProvider&&R.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_CANCELED",properties:{provider:this.socialProvider}}),h.I.goBack()),clearInterval(e))}),1e3);window.addEventListener("message",this.handleSocialConnection,!1)}updateMessage(){this.error?this.message="Something went wrong":this.connecting?this.message="Retrieving user data":this.message="Connect in the provider window"}};z.styles=H,N([(0,s.wk)()],z.prototype,"socialProvider",void 0),N([(0,s.wk)()],z.prototype,"socialWindow",void 0),N([(0,s.wk)()],z.prototype,"error",void 0),N([(0,s.wk)()],z.prototype,"connecting",void 0),N([(0,s.wk)()],z.prototype,"message",void 0),N([(0,s.wk)()],z.prototype,"remoteFeatures",void 0),z=N([(0,d.EM)("w3m-connecting-social-view")],z);var B;n(92016),n(10477),n(75938),n(63625);const G=(0,d.AH)(B||(B=(0,o.A)(["\n  wui-shimmer {\n    width: 100%;\n    aspect-ratio: 1 / 1;\n    border-radius: ",";\n  }\n\n  wui-qr-code {\n    opacity: 0;\n    animation-duration: ",";\n    animation-timing-function: ",";\n    animation-name: fade-in;\n    animation-fill-mode: forwards;\n  }\n\n  wui-logo {\n    width: 80px;\n    height: 80px;\n    border-radius: ",";\n  }\n\n  wui-flex:first-child:not(:only-child) {\n    position: relative;\n  }\n\n  wui-loading-thumbnail {\n    position: absolute;\n  }\n\n  wui-icon-box {\n    position: absolute;\n    right: calc("," * -1);\n    bottom: calc("," * -1);\n    opacity: 0;\n    transform: scale(0.5);\n    transition:\n      opacity "," ",",\n      transform ","\n        ",";\n    will-change: opacity, transform;\n  }\n\n  @keyframes fade-in {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n"])),(e=>{let{borderRadius:t}=e;return t[4]}),(e=>{let{durations:t}=e;return t.xl}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}),(e=>{let{borderRadius:t}=e;return t[8]}),(e=>{let{spacing:t}=e;return t[1]}),(e=>{let{spacing:t}=e;return t[1]}),(e=>{let{durations:t}=e;return t.lg}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}),(e=>{let{durations:t}=e;return t.lg}),(e=>{let{easings:t}=e;return t["ease-out-power-2"]}));var K,V,J,X,Q,Y,Z,$,ee,te,ne,ie,oe=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};let re=class extends r.WF{constructor(){super(),this.unsubscribe=[],this.timeout=void 0,this.socialProvider=W.U.state.socialProvider,this.uri=W.U.state.farcasterUrl,this.ready=!1,this.loading=!1,this.remoteFeatures=l.H.state.remoteFeatures,this.authConnector=u.a.getAuthConnector(),this.forceUpdate=()=>{this.requestUpdate()},this.unsubscribe.push(W.U.subscribeKey("farcasterUrl",(e=>{e&&(this.uri=e,this.connectFarcaster())})),W.U.subscribeKey("socialProvider",(e=>{e&&(this.socialProvider=e)})),l.H.subscribeKey("remoteFeatures",(e=>{this.remoteFeatures=e}))),window.addEventListener("resize",this.forceUpdate)}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.timeout),window.removeEventListener("resize",this.forceUpdate)}render(){return this.onRenderProxy(),(0,r.qy)(K||(K=(0,o.A)(["",""])),this.platformTemplate())}platformTemplate(){return g.w.isMobile()?(0,r.qy)(V||(V=(0,o.A)(["",""])),this.mobileTemplate()):(0,r.qy)(J||(J=(0,o.A)(["",""])),this.desktopTemplate())}desktopTemplate(){return this.loading?(0,r.qy)(X||(X=(0,o.A)(["",""])),this.loadingTemplate()):(0,r.qy)(Q||(Q=(0,o.A)(["",""])),this.qrTemplate())}qrTemplate(){return(0,r.qy)(Y||(Y=(0,o.A)([' <wui-flex\n      flexDirection="column"\n      alignItems="center"\n      .padding=','\n      gap="5"\n    >\n      <wui-shimmer width="100%"> ',' </wui-shimmer>\n\n      <wui-text variant="lg-medium" color="primary"> Scan this QR Code with your phone </wui-text>\n      ',"\n    </wui-flex>"])),["0","5","5","5"],this.qrCodeTemplate(),this.copyTemplate())}loadingTemplate(){return(0,r.qy)(Z||(Z=(0,o.A)(['\n      <wui-flex\n        flexDirection="column"\n        alignItems="center"\n        .padding=','\n        gap="5"\n      >\n        <wui-flex justifyContent="center" alignItems="center">\n          <wui-logo logo="farcaster"></wui-logo>\n          ','\n          <wui-icon-box color="error" icon="close" size="sm"></wui-icon-box>\n        </wui-flex>\n        <wui-flex flexDirection="column" alignItems="center" gap="2">\n          <wui-text align="center" variant="md-medium" color="primary">\n            Loading user data\n          </wui-text>\n          <wui-text align="center" variant="sm-regular" color="secondary">\n            Please wait a moment while we load your data.\n          </wui-text>\n        </wui-flex>\n      </wui-flex>\n    '])),["5","5","5","5"],this.loaderTemplate())}mobileTemplate(){return(0,r.qy)($||($=(0,o.A)([' <wui-flex\n      flexDirection="column"\n      alignItems="center"\n      .padding=','\n      gap="5"\n    >\n      <wui-flex justifyContent="center" alignItems="center">\n        <wui-logo logo="farcaster"></wui-logo>\n        ','\n        <wui-icon-box\n          color="error"\n          icon="close"\n          size="sm"\n        ></wui-icon-box>\n      </wui-flex>\n      <wui-flex flexDirection="column" alignItems="center" gap="2">\n        <wui-text align="center" variant="md-medium" color="primary"\n          >Continue in Farcaster</span></wui-text\n        >\n        <wui-text align="center" variant="sm-regular" color="secondary"\n          >Accept connection request in the app</wui-text\n        ></wui-flex\n      >\n      ',"\n    </wui-flex>"])),["10","5","5","5"],this.loaderTemplate(),this.mobileLinkTemplate())}loaderTemplate(){const e=q.W.state.themeVariables["--w3m-border-radius-master"],t=e?parseInt(e.replace("px",""),10):4;return(0,r.qy)(ee||(ee=(0,o.A)(["<wui-loading-thumbnail radius=","></wui-loading-thumbnail>"])),9*t)}async connectFarcaster(){if(this.authConnector)try{var e,t;await(null===(e=this.authConnector)||void 0===e?void 0:e.provider.connectFarcaster()),this.socialProvider&&(O.i.setConnectedSocialProvider(this.socialProvider),R.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:this.socialProvider}})),this.loading=!0;const n=L.x.getConnections(this.authConnector.chain).length>0;await L.x.connectExternal(this.authConnector,this.authConnector.chain);const i=null===(t=this.remoteFeatures)||void 0===t?void 0:t.multiWallet;this.socialProvider&&R.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:this.socialProvider}}),this.loading=!1,n&&i?(h.I.replace("ProfileWallets"),T.P.showSuccess("New Wallet Added")):F.W.close()}catch(n){this.socialProvider&&R.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:this.socialProvider,message:g.w.parseError(n)}}),h.I.goBack(),T.P.showError(n)}}mobileLinkTemplate(){return(0,r.qy)(te||(te=(0,o.A)(['<wui-button\n      size="md"\n      ?loading=',"\n      ?disabled=","\n      @click=","\n    >\n      Open farcaster</wui-button\n    >"])),this.loading,!this.uri||this.loading,(()=>{this.uri&&g.w.openHref(this.uri,"_blank")}))}onRenderProxy(){!this.ready&&this.uri&&(this.timeout=setTimeout((()=>{this.ready=!0}),200))}qrCodeTemplate(){if(!this.uri||!this.ready)return null;const e=this.getBoundingClientRect().width-40;return(0,r.qy)(ne||(ne=(0,o.A)([" <wui-qr-code\n      size=","\n      theme=","\n      uri=","\n      ?farcaster=",'\n      data-testid="wui-qr-code"\n      color=',"\n    ></wui-qr-code>"])),e,q.W.state.themeMode,this.uri,!0,(0,a.J)(q.W.state.themeVariables["--w3m-qr-color"]))}copyTemplate(){const e=!this.uri||!this.ready;return(0,r.qy)(ie||(ie=(0,o.A)(["<wui-button\n      .disabled=","\n      @click=",'\n      variant="neutral-secondary"\n      size="sm"\n      data-testid="copy-wc2-uri"\n    >\n      <wui-icon size="sm" color="default" slot="iconRight" name="copy"></wui-icon>\n      Copy link\n    </wui-button>'])),e,this.onCopyUri)}onCopyUri(){try{this.uri&&(g.w.copyToClopboard(this.uri),T.P.showSuccess("Link copied"))}catch{T.P.showError("Failed to copy")}}};re.styles=G,oe([(0,s.wk)()],re.prototype,"socialProvider",void 0),oe([(0,s.wk)()],re.prototype,"uri",void 0),oe([(0,s.wk)()],re.prototype,"ready",void 0),oe([(0,s.wk)()],re.prototype,"loading",void 0),oe([(0,s.wk)()],re.prototype,"remoteFeatures",void 0),re=oe([(0,d.EM)("w3m-connecting-farcaster-view")],re)}}]);
//# sourceMappingURL=1191.c07038cd.chunk.js.map