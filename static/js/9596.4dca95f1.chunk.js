"use strict";(self.webpackChunkpublish=self.webpackChunkpublish||[]).push([[9596],{69596:(e,t,n)=>{n.r(t),n.d(t,{W3mPayLoadingView:()=>oe,W3mPayView:()=>Z,arbitrumUSDC:()=>fe,arbitrumUSDT:()=>xe,baseETH:()=>we,baseSepoliaETH:()=>Ee,baseUSDC:()=>ge,ethereumUSDC:()=>Ae,ethereumUSDT:()=>Pe,getExchanges:()=>de,getIsPaymentInProgress:()=>he,getPayError:()=>me,getPayResult:()=>pe,openPay:()=>ue,optimismUSDC:()=>Ie,optimismUSDT:()=>be,pay:()=>le,polygonUSDC:()=>Ne,polygonUSDT:()=>_e,solanaSOL:()=>Te,solanaUSDC:()=>ve,solanaUSDT:()=>Se});var a=n(57528),r=n(37022),s=n(56370),i=n(56440),o=n(595),c=n(17321),u=n(73609),l=n(24657),d=n(7258),p=n(23743),m=n(89268),h=(n(92016),n(84107),n(10477),n(90616),n(42338),n(21311),n(45770),n(94582),n(43760),n(40135),n(84875),n(73777),n(30574)),y=n(76844),w=n(80883),g=n(71769),E=n(79323),A=n(55851),I=n(61139);const f={INVALID_PAYMENT_CONFIG:"INVALID_PAYMENT_CONFIG",INVALID_RECIPIENT:"INVALID_RECIPIENT",INVALID_ASSET:"INVALID_ASSET",INVALID_AMOUNT:"INVALID_AMOUNT",UNKNOWN_ERROR:"UNKNOWN_ERROR",UNABLE_TO_INITIATE_PAYMENT:"UNABLE_TO_INITIATE_PAYMENT",INVALID_CHAIN_NAMESPACE:"INVALID_CHAIN_NAMESPACE",GENERIC_PAYMENT_ERROR:"GENERIC_PAYMENT_ERROR",UNABLE_TO_GET_EXCHANGES:"UNABLE_TO_GET_EXCHANGES",ASSET_NOT_SUPPORTED:"ASSET_NOT_SUPPORTED",UNABLE_TO_GET_PAY_URL:"UNABLE_TO_GET_PAY_URL",UNABLE_TO_GET_BUY_STATUS:"UNABLE_TO_GET_BUY_STATUS"},N={[f.INVALID_PAYMENT_CONFIG]:"Invalid payment configuration",[f.INVALID_RECIPIENT]:"Invalid recipient address",[f.INVALID_ASSET]:"Invalid asset specified",[f.INVALID_AMOUNT]:"Invalid payment amount",[f.UNKNOWN_ERROR]:"Unknown payment error occurred",[f.UNABLE_TO_INITIATE_PAYMENT]:"Unable to initiate payment",[f.INVALID_CHAIN_NAMESPACE]:"Invalid chain namespace",[f.GENERIC_PAYMENT_ERROR]:"Unable to process payment",[f.UNABLE_TO_GET_EXCHANGES]:"Unable to get exchanges",[f.ASSET_NOT_SUPPORTED]:"Asset not supported by the selected exchange",[f.UNABLE_TO_GET_PAY_URL]:"Unable to get payment URL",[f.UNABLE_TO_GET_BUY_STATUS]:"Unable to get buy status"};class v extends Error{get message(){return N[this.code]}constructor(e,t){super(N[e]),this.name="AppKitPayError",this.code=e,this.details=t,Error.captureStackTrace&&Error.captureStackTrace(this,v)}}var P=n(42661);const b="https://rpc.walletconnect.org/v1/json-rpc";class x extends Error{}async function _(e,t){const n=function(){const e=P.H.getSnapshot().projectId;return"".concat(b,"?projectId=").concat(e)}(),{sdkType:a,sdkVersion:r,projectId:s}=P.H.getSnapshot(),i={jsonrpc:"2.0",id:1,method:e,params:{...t||{},st:a,sv:r,projectId:s}},o=await fetch(n,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}),c=await o.json();if(c.error)throw new x(c.error.message);return c}async function S(e){return(await _("reown_getExchanges",e)).result}const T=["eip155","solana"],C={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};function k(e,t){const{chainNamespace:n,chainId:a}=g.C.parseCaipNetworkId(e),r=C[n];if(!r)throw new Error("Unsupported chain namespace for CAIP-19 formatting: ".concat(n));let s=r.native.assetNamespace,i=r.native.assetReference;"native"!==t&&(s=r.defaultTokenNamespace,i=t);const o="".concat(n,":").concat(a);return"".concat(o,"/").concat(s,":").concat(i)}var U=n(23255);const R="unknown",D=(0,h.BX)({paymentAsset:{network:"eip155:1",asset:"0x0",metadata:{name:"0x0",symbol:"0x0",decimals:0}},recipient:"0x0",amount:0,isConfigured:!1,error:null,isPaymentInProgress:!1,exchanges:[],isLoading:!1,openInNewTab:!0,redirectUrl:void 0,payWithExchange:void 0,currentPayment:void 0,analyticsSet:!1,paymentId:void 0}),O={state:D,subscribe:e=>(0,h.B1)(D,(()=>e(D))),subscribeKey:(e,t)=>(0,y.u$)(D,e,t),async handleOpenPay(e){this.resetState(),this.setPaymentConfig(e),this.subscribeEvents(),this.initializeAnalytics(),D.isConfigured=!0,E.E.sendEvent({type:"track",event:"PAY_MODAL_OPEN",properties:{exchanges:D.exchanges,configuration:{network:D.paymentAsset.network,asset:D.paymentAsset.asset,recipient:D.recipient,amount:D.amount}}}),await u.W.open({view:"Pay"})},resetState(){D.paymentAsset={network:"eip155:1",asset:"0x0",metadata:{name:"0x0",symbol:"0x0",decimals:0}},D.recipient="0x0",D.amount=0,D.isConfigured=!1,D.error=null,D.isPaymentInProgress=!1,D.isLoading=!1,D.currentPayment=void 0},setPaymentConfig(e){if(!e.paymentAsset)throw new v(f.INVALID_PAYMENT_CONFIG);try{var t;D.paymentAsset=e.paymentAsset,D.recipient=e.recipient,D.amount=e.amount,D.openInNewTab=null===(t=e.openInNewTab)||void 0===t||t,D.redirectUrl=e.redirectUrl,D.payWithExchange=e.payWithExchange,D.error=null}catch(n){throw new v(f.INVALID_PAYMENT_CONFIG,n.message)}},getPaymentAsset:()=>D.paymentAsset,getExchanges:()=>D.exchanges,async fetchExchanges(){try{D.isLoading=!0;const e=await S({page:0,asset:k(D.paymentAsset.network,D.paymentAsset.asset),amount:D.amount.toString()});D.exchanges=e.exchanges.slice(0,2)}catch(e){throw d.P.showError(N.UNABLE_TO_GET_EXCHANGES),new v(f.UNABLE_TO_GET_EXCHANGES)}finally{D.isLoading=!1}},async getAvailableExchanges(e){try{var t,n;const a=null!==e&&void 0!==e&&e.asset&&null!==e&&void 0!==e&&e.network?k(e.network,e.asset):void 0;return await S({page:null!==(t=null===e||void 0===e?void 0:e.page)&&void 0!==t?t:0,asset:a,amount:null===e||void 0===e||null===(n=e.amount)||void 0===n?void 0:n.toString()})}catch(a){throw new v(f.UNABLE_TO_GET_EXCHANGES)}},async getPayUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{const a=Number(t.amount),r=await async function(e){return(await _("reown_getExchangePayUrl",e)).result}({exchangeId:e,asset:k(t.network,t.asset),amount:a.toString(),recipient:"".concat(t.network,":").concat(t.recipient)});return E.E.sendEvent({type:"track",event:"PAY_EXCHANGE_SELECTED",properties:{source:"pay",exchange:{id:e},configuration:{network:t.network,asset:t.asset,recipient:t.recipient,amount:a},currentPayment:{type:"exchange",exchangeId:e},headless:n}}),n&&(this.initiatePayment(),E.E.sendEvent({type:"track",event:"PAY_INITIATED",properties:{source:"pay",paymentId:D.paymentId||R,configuration:{network:t.network,asset:t.asset,recipient:t.recipient,amount:a},currentPayment:{type:"exchange",exchangeId:e}}})),r}catch(a){if(a instanceof Error&&a.message.includes("is not supported"))throw new v(f.ASSET_NOT_SUPPORTED);throw new Error(a.message)}},async openPayUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var a;const r=await this.getPayUrl(e.exchangeId,t,n);if(!r)throw new v(f.UNABLE_TO_GET_PAY_URL);const s=null===(a=e.openInNewTab)||void 0===a||a?"_blank":"_self";return l.w.openHref(r.url,s),r}catch(r){throw D.error=r instanceof v?r.message:N.GENERIC_PAYMENT_ERROR,new v(f.UNABLE_TO_GET_PAY_URL)}},subscribeEvents(){D.isConfigured||(p.x.subscribeKey("connections",(e=>{e.size>0&&this.handlePayment()})),o.U.subscribeKey("caipAddress",(e=>{const t=p.x.hasAnyConnection(w.o.CONNECTOR_ID.WALLET_CONNECT);e&&(t?setTimeout((()=>{this.handlePayment()}),100):this.handlePayment())})))},async handlePayment(){D.currentPayment={type:"wallet",status:"IN_PROGRESS"};const e=o.U.state.caipAddress;if(!e)return;const{chainId:t,address:n}=g.C.parseCaipAddress(e),a=c.W.state.activeChain;if(!n||!t||!a)return;if(!A.G.getProvider(a))return;const r=c.W.state.activeCaipNetwork;if(r&&!D.isPaymentInProgress)try{this.initiatePayment();const e=c.W.getAllRequestedCaipNetworks(),t=c.W.getAllApprovedCaipNetworkIds();switch(await async function(e){const{paymentAssetNetwork:t,activeCaipNetwork:n,approvedCaipNetworkIds:a,requestedCaipNetworks:r}=e,s=l.w.sortRequestedNetworks(a,r).find((e=>e.caipNetworkId===t));if(!s)throw new v(f.INVALID_PAYMENT_CONFIG);if(s.caipNetworkId===n.caipNetworkId)return;const i=c.W.getNetworkProp("supportsAllNetworks",s.chainNamespace);if(!(null===a||void 0===a?void 0:a.includes(s.caipNetworkId))&&!i)throw new v(f.INVALID_PAYMENT_CONFIG);try{await c.W.switchActiveNetwork(s)}catch(o){throw new v(f.GENERIC_PAYMENT_ERROR,o)}}({paymentAssetNetwork:D.paymentAsset.network,activeCaipNetwork:r,approvedCaipNetworkIds:t,requestedCaipNetworks:e}),await u.W.open({view:"PayLoading"}),a){case w.o.CHAIN.EVM:"native"===D.paymentAsset.asset&&(D.currentPayment.result=await async function(e,t,n){var a,r;if(t!==w.o.CHAIN.EVM)throw new v(f.INVALID_CHAIN_NAMESPACE);if(!n.fromAddress)throw new v(f.INVALID_PAYMENT_CONFIG,"fromAddress is required for native EVM payments.");const s="string"===typeof n.amount?parseFloat(n.amount):n.amount;if(isNaN(s))throw new v(f.INVALID_PAYMENT_CONFIG);const i=null!==(a=null===(r=e.metadata)||void 0===r?void 0:r.decimals)&&void 0!==a?a:18,o=p.x.parseUnits(s.toString(),i);if("bigint"!==typeof o)throw new v(f.GENERIC_PAYMENT_ERROR);const c=await p.x.sendTransaction({chainNamespace:t,to:n.recipient,address:n.fromAddress,value:o,data:"0x"});return null!==c&&void 0!==c?c:void 0}(D.paymentAsset,a,{recipient:D.recipient,amount:D.amount,fromAddress:n})),D.paymentAsset.asset.startsWith("0x")&&(D.currentPayment.result=await async function(e,t){if(!t.fromAddress)throw new v(f.INVALID_PAYMENT_CONFIG,"fromAddress is required for ERC20 EVM payments.");const n=e.asset,a=t.recipient,r=Number(e.metadata.decimals),s=p.x.parseUnits(t.amount.toString(),r);if(void 0===s)throw new v(f.GENERIC_PAYMENT_ERROR);const i=await p.x.writeContract({fromAddress:t.fromAddress,tokenAddress:n,args:[a,s],method:"transfer",abi:U.v.getERC20Abi(n),chainNamespace:w.o.CHAIN.EVM});return null!==i&&void 0!==i?i:void 0}(D.paymentAsset,{recipient:D.recipient,amount:D.amount,fromAddress:n})),D.currentPayment.status="SUCCESS";break;case w.o.CHAIN.SOLANA:D.currentPayment.result=await async function(e,t){if(e!==w.o.CHAIN.SOLANA)throw new v(f.INVALID_CHAIN_NAMESPACE);if(!t.fromAddress)throw new v(f.INVALID_PAYMENT_CONFIG,"fromAddress is required for Solana payments.");const n="string"===typeof t.amount?parseFloat(t.amount):t.amount;if(isNaN(n)||n<=0)throw new v(f.INVALID_PAYMENT_CONFIG,"Invalid payment amount.");try{if(!A.G.getProvider(e))throw new v(f.GENERIC_PAYMENT_ERROR,"No Solana provider available.");const a=await p.x.sendTransaction({chainNamespace:w.o.CHAIN.SOLANA,to:t.recipient,value:n,tokenMint:t.tokenMint});if(!a)throw new v(f.GENERIC_PAYMENT_ERROR,"Transaction failed.");return a}catch(a){if(a instanceof v)throw a;throw new v(f.GENERIC_PAYMENT_ERROR,"Solana payment failed: ".concat(a))}}(a,{recipient:D.recipient,amount:D.amount,fromAddress:n,tokenMint:"native"===D.paymentAsset.asset?void 0:D.paymentAsset.asset}),D.currentPayment.status="SUCCESS";break;default:throw new v(f.INVALID_CHAIN_NAMESPACE)}}catch(s){D.error=s instanceof v?s.message:N.GENERIC_PAYMENT_ERROR,D.currentPayment.status="FAILED",d.P.showError(D.error)}finally{D.isPaymentInProgress=!1}},getExchangeById:e=>D.exchanges.find((t=>t.id===e)),validatePayConfig(e){const{paymentAsset:t,recipient:n,amount:a}=e;if(!t)throw new v(f.INVALID_PAYMENT_CONFIG);if(!n)throw new v(f.INVALID_RECIPIENT);if(!t.asset)throw new v(f.INVALID_ASSET);if(void 0===a||null===a||a<=0)throw new v(f.INVALID_AMOUNT)},handlePayWithWallet(){const e=o.U.state.caipAddress;if(!e)return void I.I.push("Connect");const{chainId:t,address:n}=g.C.parseCaipAddress(e),a=c.W.state.activeChain;n&&t&&a?this.handlePayment():I.I.push("Connect")},async handlePayWithExchange(e){try{D.currentPayment={type:"exchange",exchangeId:e};const{network:t,asset:n}=D.paymentAsset,a={network:t,asset:n,amount:D.amount,recipient:D.recipient},r=await this.getPayUrl(e,a);if(!r)throw new v(f.UNABLE_TO_INITIATE_PAYMENT);return D.currentPayment.sessionId=r.sessionId,D.currentPayment.status="IN_PROGRESS",D.currentPayment.exchangeId=e,this.initiatePayment(),{url:r.url,openInNewTab:D.openInNewTab}}catch(t){return D.error=t instanceof v?t.message:N.GENERIC_PAYMENT_ERROR,D.isPaymentInProgress=!1,d.P.showError(D.error),null}},async getBuyStatus(e,t){try{const r=await async function(e){return(await _("reown_getExchangeBuyStatus",e)).result}({sessionId:t,exchangeId:e});var n,a;if("SUCCESS"===r.status||"FAILED"===r.status)E.E.sendEvent({type:"track",event:"SUCCESS"===r.status?"PAY_SUCCESS":"PAY_ERROR",properties:{message:"FAILED"===r.status?l.w.parseError(D.error):void 0,source:"pay",paymentId:D.paymentId||R,configuration:{network:D.paymentAsset.network,asset:D.paymentAsset.asset,recipient:D.recipient,amount:D.amount},currentPayment:{type:"exchange",exchangeId:null===(n=D.currentPayment)||void 0===n?void 0:n.exchangeId,sessionId:null===(a=D.currentPayment)||void 0===a?void 0:a.sessionId,result:r.txHash}}});return r}catch(r){throw new v(f.UNABLE_TO_GET_BUY_STATUS)}},async updateBuyStatus(e,t){try{const n=await this.getBuyStatus(e,t);D.currentPayment&&(D.currentPayment.status=n.status,D.currentPayment.result=n.txHash),"SUCCESS"!==n.status&&"FAILED"!==n.status||(D.isPaymentInProgress=!1)}catch(n){throw new v(f.UNABLE_TO_GET_BUY_STATUS)}},initiatePayment(){D.isPaymentInProgress=!0,D.paymentId=crypto.randomUUID()},initializeAnalytics(){D.analyticsSet||(D.analyticsSet=!0,this.subscribeKey("isPaymentInProgress",(e=>{var t;if(null!==(t=D.currentPayment)&&void 0!==t&&t.status&&"UNKNOWN"!==D.currentPayment.status){const e={IN_PROGRESS:"PAY_INITIATED",SUCCESS:"PAY_SUCCESS",FAILED:"PAY_ERROR"}[D.currentPayment.status];E.E.sendEvent({type:"track",event:e,properties:{message:"FAILED"===D.currentPayment.status?l.w.parseError(D.error):void 0,source:"pay",paymentId:D.paymentId||R,configuration:{network:D.paymentAsset.network,asset:D.paymentAsset.asset,recipient:D.recipient,amount:D.amount},currentPayment:{type:D.currentPayment.type,exchangeId:D.currentPayment.exchangeId,sessionId:D.currentPayment.sessionId,result:D.currentPayment.result}}})}})))}};var L;const M=(0,r.AH)(L||(L=(0,a.A)(["\n  wui-separator {\n    margin: var(--apkt-spacing-3) calc(var(--apkt-spacing-3) * -1) var(--apkt-spacing-2)\n      calc(var(--apkt-spacing-3) * -1);\n    width: calc(100% + var(--apkt-spacing-3) * 2);\n  }\n\n  .token-display {\n    padding: var(--apkt-spacing-3) var(--apkt-spacing-3);\n    border-radius: var(--apkt-borderRadius-5);\n    background-color: var(--apkt-tokens-theme-backgroundPrimary);\n    margin-top: var(--apkt-spacing-3);\n    margin-bottom: var(--apkt-spacing-3);\n  }\n\n  .token-display wui-text {\n    text-transform: none;\n  }\n\n  wui-loading-spinner {\n    padding: var(--apkt-spacing-2);\n  }\n"])));var G,W,Y,V,B,F,H,q,z,j,K=function(e,t,n,a){var r,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};let Z=class extends r.WF{constructor(){super(),this.unsubscribe=[],this.amount="",this.tokenSymbol="",this.networkName="",this.exchanges=O.state.exchanges,this.isLoading=O.state.isLoading,this.loadingExchangeId=null,this.connectedWalletInfo=o.U.state.connectedWalletInfo,this.initializePaymentDetails(),this.unsubscribe.push(O.subscribeKey("exchanges",(e=>this.exchanges=e))),this.unsubscribe.push(O.subscribeKey("isLoading",(e=>this.isLoading=e))),this.unsubscribe.push(o.U.subscribe((e=>this.connectedWalletInfo=e.connectedWalletInfo))),O.fetchExchanges()}get isWalletConnected(){return"connected"===o.U.state.status}render(){return(0,r.qy)(G||(G=(0,a.A)(['\n      <wui-flex flexDirection="column">\n        <wui-flex flexDirection="column" .padding=',' gap="3">\n          ','\n\n          <wui-flex flexDirection="column" gap="3">\n            '," ","\n          </wui-flex>\n        </wui-flex>\n      </wui-flex>\n    "])),["0","4","4","4"],this.renderPaymentHeader(),this.renderPayWithWallet(),this.renderExchangeOptions())}initializePaymentDetails(){const e=O.getPaymentAsset();this.networkName=e.network,this.tokenSymbol=e.metadata.symbol,this.amount=O.state.amount.toString()}renderPayWithWallet(){return function(e){const{chainNamespace:t}=g.C.parseCaipNetworkId(e);return T.includes(t)}(this.networkName)?(0,r.qy)(Y||(Y=(0,a.A)(['<wui-flex flexDirection="column" gap="3">\n        ','\n      </wui-flex>\n      <wui-separator text="or"></wui-separator>'])),this.isWalletConnected?this.renderConnectedView():this.renderDisconnectedView()):(0,r.qy)(W||(W=(0,a.A)([""])))}renderPaymentHeader(){let e=this.networkName;if(this.networkName){const t=c.W.getAllRequestedCaipNetworks().find((e=>e.caipNetworkId===this.networkName));t&&(e=t.name)}return(0,r.qy)(V||(V=(0,a.A)(['\n      <wui-flex flexDirection="column" alignItems="center">\n        <wui-flex alignItems="center" gap="2">\n          <wui-text variant="h1-regular" color="primary">','</wui-text>\n          <wui-flex class="token-display" alignItems="center" gap="1">\n            <wui-text variant="md-medium" color="primary">\n              ',"\n            </wui-text>\n            ","\n          </wui-flex>\n        </wui-flex>\n      </wui-flex>\n    "])),this.amount||"0.0000",this.tokenSymbol||"Unknown Asset",e?(0,r.qy)(B||(B=(0,a.A)(['\n                  <wui-text variant="sm-medium" color="secondary">\n                    on ',"\n                  </wui-text>\n                "])),e):"")}renderConnectedView(){var e,t;const n=(null===(e=this.connectedWalletInfo)||void 0===e?void 0:e.name)||"connected wallet";return(0,r.qy)(F||(F=(0,a.A)(["\n      <wui-list-item\n        @click=","\n        ?chevron=","\n        ?fullSize=","\n        ?rounded=",'\n        data-testid="wallet-payment-option"\n        imageSrc=','\n      >\n        <wui-text variant="lg-regular" color="primary">Pay with ','</wui-text>\n      </wui-list-item>\n\n      <wui-list-item\n        icon="power"\n        ?rounded=','\n        iconColor="error"\n        @click=','\n        data-testid="disconnect-button"\n        ?chevron=','\n      >\n        <wui-text variant="lg-regular" color="secondary">Disconnect</wui-text>\n      </wui-list-item>\n    '])),this.onWalletPayment,!0,!0,!0,(0,i.J)(null===(t=this.connectedWalletInfo)||void 0===t?void 0:t.icon),n,!0,this.onDisconnect,!1)}renderDisconnectedView(){return(0,r.qy)(H||(H=(0,a.A)(['<wui-list-item\n      variant="icon"\n      iconVariant="overlay"\n      icon="wallet"\n      ?rounded=',"\n      @click=","\n      ?chevron=",'\n      data-testid="wallet-payment-option"\n    >\n      <wui-text variant="lg-regular" color="primary">Pay from wallet</wui-text>\n    </wui-list-item>'])),!0,this.onWalletPayment,!0)}renderExchangeOptions(){return this.isLoading?(0,r.qy)(q||(q=(0,a.A)(['<wui-flex justifyContent="center" alignItems="center">\n        <wui-spinner size="md"></wui-spinner>\n      </wui-flex>']))):0===this.exchanges.length?(0,r.qy)(z||(z=(0,a.A)(['<wui-flex justifyContent="center" alignItems="center">\n        <wui-text variant="md-medium" color="primary">No exchanges available</wui-text>\n      </wui-flex>']))):this.exchanges.map((e=>(0,r.qy)(j||(j=(0,a.A)(["\n        <wui-list-item\n          @click=",'\n          data-testid="exchange-option-','"\n          ?chevron=',"\n          ?disabled=","\n          ?loading=","\n          imageSrc=",'\n        >\n          <wui-flex alignItems="center" gap="3">\n            <wui-text flexGrow="1" variant="md-medium" color="primary"\n              >Pay with ',' <wui-spinner size="sm" color="secondary"></wui-spinner\n            ></wui-text>\n          </wui-flex>\n        </wui-list-item>\n      '])),(()=>this.onExchangePayment(e.id)),e.id,!0,null!==this.loadingExchangeId,this.loadingExchangeId===e.id,(0,i.J)(e.imageUrl),e.name)))}onWalletPayment(){O.handlePayWithWallet()}async onExchangePayment(e){try{this.loadingExchangeId=e;const t=await O.handlePayWithExchange(e);t&&(await u.W.open({view:"PayLoading"}),l.w.openHref(t.url,t.openInNewTab?"_blank":"_self"))}catch(t){console.error("Failed to pay with exchange",t),d.P.showError("Failed to pay with exchange")}finally{this.loadingExchangeId=null}}async onDisconnect(e){e.stopPropagation();try{await p.x.disconnect()}catch{console.error("Failed to disconnect"),d.P.showError("Failed to disconnect")}}disconnectedCallback(){this.unsubscribe.forEach((e=>e()))}};Z.styles=M,K([(0,s.wk)()],Z.prototype,"amount",void 0),K([(0,s.wk)()],Z.prototype,"tokenSymbol",void 0),K([(0,s.wk)()],Z.prototype,"networkName",void 0),K([(0,s.wk)()],Z.prototype,"exchanges",void 0),K([(0,s.wk)()],Z.prototype,"isLoading",void 0),K([(0,s.wk)()],Z.prototype,"loadingExchangeId",void 0),K([(0,s.wk)()],Z.prototype,"connectedWalletInfo",void 0),Z=K([(0,m.EM)("w3m-pay-view")],Z);var X,J=n(36141),$=n(25015),Q=n(1348);n(27667);const ee=(0,r.AH)(X||(X=(0,a.A)(["\n  :host {\n    display: block;\n    height: 100%;\n    width: 100%;\n  }\n\n  wui-flex:first-child:not(:only-child) {\n    position: relative;\n  }\n\n  wui-loading-thumbnail {\n    position: absolute;\n  }\n"])));var te,ne,ae,re,se,ie=function(e,t,n,a){var r,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};let oe=class extends r.WF{constructor(){super(),this.loadingMessage="",this.subMessage="",this.paymentState="in-progress",this.paymentState=O.state.isPaymentInProgress?"in-progress":"completed",this.updateMessages(),this.setupSubscription(),this.setupExchangeSubscription()}disconnectedCallback(){clearInterval(this.exchangeSubscription)}render(){return(0,r.qy)(te||(te=(0,a.A)(['\n      <wui-flex\n        flexDirection="column"\n        alignItems="center"\n        .padding=','\n        gap="9"\n      >\n        <wui-flex justifyContent="center" alignItems="center"> ',' </wui-flex>\n        <wui-flex flexDirection="column" alignItems="center" gap="2">\n          <wui-text align="center" variant="lg-medium" color="primary">\n            ','\n          </wui-text>\n          <wui-text align="center" variant="lg-regular" color="secondary">\n            ',"\n          </wui-text>\n        </wui-flex>\n      </wui-flex>\n    "])),["7","5","5","5"],this.getStateIcon(),this.loadingMessage,this.subMessage)}updateMessages(){var e;switch(this.paymentState){case"completed":this.loadingMessage="Payment completed",this.subMessage="Your transaction has been successfully processed";break;case"error":this.loadingMessage="Payment failed",this.subMessage="There was an error processing your transaction";break;default:"exchange"===(null===(e=O.state.currentPayment)||void 0===e?void 0:e.type)?(this.loadingMessage="Payment initiated",this.subMessage="Please complete the payment on the exchange"):(this.loadingMessage="Awaiting payment confirmation",this.subMessage="Please confirm the payment transaction in your wallet")}}getStateIcon(){switch(this.paymentState){case"completed":return this.successTemplate();case"error":return this.errorTemplate();default:return this.loaderTemplate()}}setupExchangeSubscription(){var e;"exchange"===(null===(e=O.state.currentPayment)||void 0===e?void 0:e.type)&&(this.exchangeSubscription=setInterval((async()=>{var e,t;const n=null===(e=O.state.currentPayment)||void 0===e?void 0:e.exchangeId,a=null===(t=O.state.currentPayment)||void 0===t?void 0:t.sessionId;var r;n&&a&&(await O.updateBuyStatus(n,a),"SUCCESS"===(null===(r=O.state.currentPayment)||void 0===r?void 0:r.status)&&clearInterval(this.exchangeSubscription))}),4e3))}setupSubscription(){O.subscribeKey("isPaymentInProgress",(e=>{var t;e||"in-progress"!==this.paymentState||(O.state.error||null===(t=O.state.currentPayment)||void 0===t||!t.result?this.paymentState="error":this.paymentState="completed",this.updateMessages(),setTimeout((()=>{"disconnected"!==p.x.state.status&&u.W.close()}),3e3))})),O.subscribeKey("error",(e=>{e&&"in-progress"===this.paymentState&&(this.paymentState="error",this.updateMessages())}))}loaderTemplate(){const e=J.W.state.themeVariables["--w3m-border-radius-master"],t=e?parseInt(e.replace("px",""),10):4,n=this.getPaymentIcon();return(0,r.qy)(ne||(ne=(0,a.A)(['\n      <wui-flex justifyContent="center" alignItems="center" style="position: relative;">\n        ',"\n        <wui-loading-thumbnail radius=","></wui-loading-thumbnail>\n      </wui-flex>\n    "])),n?(0,r.qy)(ae||(ae=(0,a.A)(['<wui-wallet-image size="lg" imageSrc=',"></wui-wallet-image>"])),n):null,9*t)}getPaymentIcon(){const e=O.state.currentPayment;if(e){if("exchange"===e.type){const t=e.exchangeId;if(t){const e=O.getExchangeById(t);return null===e||void 0===e?void 0:e.imageUrl}}if("wallet"===e.type){var t;const e=null===(t=o.U.state.connectedWalletInfo)||void 0===t?void 0:t.icon;if(e)return e;const n=c.W.state.activeChain;if(!n)return;const a=$.a.getConnectorId(n);if(!a)return;const r=$.a.getConnectorById(a);if(!r)return;return Q.$.getConnectorImage(r)}}}successTemplate(){return(0,r.qy)(re||(re=(0,a.A)(['<wui-icon size="xl" color="success" name="checkmark"></wui-icon>'])))}errorTemplate(){return(0,r.qy)(se||(se=(0,a.A)(['<wui-icon size="xl" color="error" name="close"></wui-icon>'])))}};oe.styles=ee,ie([(0,s.wk)()],oe.prototype,"loadingMessage",void 0),ie([(0,s.wk)()],oe.prototype,"subMessage",void 0),ie([(0,s.wk)()],oe.prototype,"paymentState",void 0),oe=ie([(0,m.EM)("w3m-pay-loading-view")],oe);const ce=3e5;async function ue(e){return O.handleOpenPay(e)}async function le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce;if(t<=0)throw new v(f.INVALID_PAYMENT_CONFIG,"Timeout must be greater than 0");try{await ue(e)}catch(n){if(n instanceof v)throw n;throw new v(f.UNABLE_TO_INITIATE_PAYMENT,n.message)}return new Promise(((e,n)=>{let a=!1;const r=setTimeout((()=>{a||(a=!0,u(),n(new v(f.GENERIC_PAYMENT_ERROR,"Payment timeout")))}),t);function s(){if(a)return;const t=O.state.currentPayment,n=O.state.error,s=O.state.isPaymentInProgress;return"SUCCESS"===(null===t||void 0===t?void 0:t.status)?(a=!0,u(),clearTimeout(r),void e({success:!0,result:t.result})):"FAILED"===(null===t||void 0===t?void 0:t.status)?(a=!0,u(),clearTimeout(r),void e({success:!1,error:n||"Payment failed"})):void(!n||s||t||(a=!0,u(),clearTimeout(r),e({success:!1,error:n})))}const i=ye("currentPayment",s),o=ye("error",s),c=ye("isPaymentInProgress",s),u=(l=[i,o,c],()=>{l.forEach((e=>{try{e()}catch{}}))});var l;s()}))}function de(){return O.getExchanges()}function pe(){var e;return null===(e=O.state.currentPayment)||void 0===e?void 0:e.result}function me(){return O.state.error}function he(){return O.state.isPaymentInProgress}function ye(e,t){return O.subscribeKey(e,t)}const we={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},ge={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Ee={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},Ae={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Ie={network:"eip155:10",asset:"0x0b2c639c533813f4aa9d7837caf62653d097ff85",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},fe={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Ne={network:"eip155:137",asset:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},ve={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Pe={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},be={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},xe={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},_e={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Se={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Te={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}}},90616:(e,t,n)=>{var a,r=n(57528),s=n(37022),i=n(56370),o=(n(58565),n(39446)),c=n(37845);const u=(0,n(89406).AH)(a||(a=(0,r.A)(["\n  :host {\n    position: relative;\n  }\n\n  button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: transparent;\n    padding: ",";\n  }\n\n  /* -- Colors --------------------------------------------------- */\n  button[data-type='accent'] wui-icon {\n    color: ",";\n  }\n\n  button[data-type='neutral'][data-variant='primary'] wui-icon {\n    color: ",";\n  }\n\n  button[data-type='neutral'][data-variant='secondary'] wui-icon {\n    color: ",";\n  }\n\n  button[data-type='success'] wui-icon {\n    color: ",";\n  }\n\n  button[data-type='error'] wui-icon {\n    color: ",";\n  }\n\n  /* -- Sizes --------------------------------------------------- */\n  button[data-size='xs'] {\n    width: 16px;\n    height: 16px;\n\n    border-radius: ",";\n  }\n\n  button[data-size='sm'] {\n    width: 20px;\n    height: 20px;\n    border-radius: ",";\n  }\n\n  button[data-size='md'] {\n    width: 24px;\n    height: 24px;\n    border-radius: ",";\n  }\n\n  button[data-size='lg'] {\n    width: 28px;\n    height: 28px;\n    border-radius: ",";\n  }\n\n  button[data-size='xs'] wui-icon {\n    width: 8px;\n    height: 8px;\n  }\n\n  button[data-size='sm'] wui-icon {\n    width: 12px;\n    height: 12px;\n  }\n\n  button[data-size='md'] wui-icon {\n    width: 16px;\n    height: 16px;\n  }\n\n  button[data-size='lg'] wui-icon {\n    width: 20px;\n    height: 20px;\n  }\n\n  /* -- Hover --------------------------------------------------- */\n  @media (hover: hover) {\n    button[data-type='accent']:hover:enabled {\n      background-color: ",";\n    }\n\n    button[data-variant='primary'][data-type='neutral']:hover:enabled {\n      background-color: ",";\n    }\n\n    button[data-variant='secondary'][data-type='neutral']:hover:enabled {\n      background-color: ",";\n    }\n\n    button[data-type='success']:hover:enabled {\n      background-color: ",";\n    }\n\n    button[data-type='error']:hover:enabled {\n      background-color: ",";\n    }\n  }\n\n  /* -- Focus --------------------------------------------------- */\n  button:focus-visible {\n    box-shadow: 0 0 0 4px ",";\n  }\n\n  /* -- Properties --------------------------------------------------- */\n  button[data-full-width='true'] {\n    width: 100%;\n  }\n\n  :host([fullWidth]) {\n    width: 100%;\n  }\n\n  button[disabled] {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),(e=>{let{spacing:t}=e;return t[1]}),(e=>{let{tokens:t}=e;return t.core.iconAccentPrimary}),(e=>{let{tokens:t}=e;return t.theme.iconInverse}),(e=>{let{tokens:t}=e;return t.theme.iconDefault}),(e=>{let{tokens:t}=e;return t.core.iconSuccess}),(e=>{let{tokens:t}=e;return t.core.iconError}),(e=>{let{borderRadius:t}=e;return t[1]}),(e=>{let{borderRadius:t}=e;return t[1]}),(e=>{let{borderRadius:t}=e;return t[2]}),(e=>{let{borderRadius:t}=e;return t[2]}),(e=>{let{tokens:t}=e;return t.core.foregroundAccent010}),(e=>{let{tokens:t}=e;return t.theme.foregroundSecondary}),(e=>{let{tokens:t}=e;return t.theme.foregroundSecondary}),(e=>{let{tokens:t}=e;return t.core.backgroundSuccess}),(e=>{let{tokens:t}=e;return t.core.backgroundError}),(e=>{let{tokens:t}=e;return t.core.foregroundAccent020}));var l,d=function(e,t,n,a){var r,s=arguments.length,i=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};let p=class extends s.WF{constructor(){super(...arguments),this.icon="card",this.variant="primary",this.type="accent",this.size="md",this.fullWidth=!1,this.disabled=!1}render(){return(0,s.qy)(l||(l=(0,r.A)(["<button\n      data-variant=","\n      data-type=","\n      data-size=","\n      data-full-width=","\n      ?disabled=",'\n    >\n      <wui-icon color="inherit" name=',"></wui-icon>\n    </button>"])),this.variant,this.type,this.size,this.fullWidth,this.disabled,this.icon)}};p.styles=[o.W5,o.fD,u],d([(0,i.MZ)()],p.prototype,"icon",void 0),d([(0,i.MZ)()],p.prototype,"variant",void 0),d([(0,i.MZ)()],p.prototype,"type",void 0),d([(0,i.MZ)()],p.prototype,"size",void 0),d([(0,i.MZ)({type:Boolean})],p.prototype,"fullWidth",void 0),d([(0,i.MZ)({type:Boolean})],p.prototype,"disabled",void 0),p=d([(0,c.E)("wui-icon-button")],p)},21311:(e,t,n)=>{n(71056)}}]);
//# sourceMappingURL=9596.4dca95f1.chunk.js.map